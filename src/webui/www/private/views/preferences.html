<div id="BehaviorTab" class="PrefTab">
    <fieldset class="settings">
        <legend class="qbt-translatable" data-i18n="Language">Language</legend>
        <label for="locale_select" class="qbt-translatable" data-i18n="User Interface Language:">User Interface Language:</label>
        <select id="locale_select">
            ${LANGUAGE_OPTIONS}
        </select>
    </fieldset>

    <fieldset class="settings">
        <legend>
            <input type="checkbox" id="filelog_checkbox" onclick="qBittorrent.Preferences.updateFileLogEnabled();" />
            <label for="filelog_checkbox" class="qbt-translatable" data-i18n="Log file">Log file</label>
        </legend>
        <div class="formRow">
            <label for="filelog_save_path_input" class="qbt-translatable" data-i18n="Save path:">Save path:</label>
            <input type="text" id="filelog_save_path_input" />
        </div>
        <table>
            <tr>
                <td><input type="checkbox" id="filelog_backup_checkbox" onclick="qBittorrent.Preferences.updateFileLogBackupEnabled();" /></td>
                <td><label for="filelog_backup_checkbox" class="qbt-translatable" data-i18n="Backup the log file after:">Backup the log file after:</label></td>
                <td><input id="filelog_max_size_input" type="number" min="1" max="1024000" value="65" onchange="qBittorrent.Preferences.numberInputLimiter(this);" / class="qbt-translatable" data-i18n="KiB">KiB</td>
            </tr>
            <tr>
                <td><input type="checkbox" id="filelog_delete_old_checkbox" onclick="qBittorrent.Preferences.updateFileLogDeleteEnabled();" /></td>
                <td><label for="filelog_delete_old_checkbox" class="qbt-translatable" data-i18n="Delete backup logs older than:">Delete backup logs older than:</label></td>
                <td>
                    <input type="number" min="1" max="365" value="6" id="filelog_age_input" onchange="qBittorrent.Preferences.numberInputLimiter(this);" />
                    <select id="filelog_age_type_select">
                        <option value="0" class="qbt-translatable" data-i18n="days">days</option>
                        <option value="1" selected class="qbt-translatable" data-i18n="months">months</option>
                        <option value="2" class="qbt-translatable" data-i18n="years">years</option>
                    </select>
                </td>
            </tr>
        </table>
    </fieldset>

    <div class="formRow">
        <input type="checkbox" id="performanceWarning" />
        <label for="performanceWarning" class="qbt-translatable" data-i18n="Log performance warnings">Log performance warnings</label>
    </div>
</div>

<div id="DownloadsTab" class="PrefTab invisible">
    <fieldset class="settings">
        <legend class="qbt-translatable" data-i18n="When adding a torrent">When adding a torrent</legend>
        <div class="formRow">
            <label for="contentlayout_select" class="qbt-translatable" data-i18n="Torrent content layout:">Torrent content layout:</label>
            <select id="contentlayout_select">
                <option value="Original" class="qbt-translatable" data-i18n="Original">Original</option>
                <option value="Subfolder" class="qbt-translatable" data-i18n="Create subfolder">Create subfolder</option>
                <option value="NoSubfolder" class="qbt-translatable" data-i18n="Don't create subfolder">Don't create subfolder</option>
            </select>
        </div>
        <div class="formRow">
            <input type="checkbox" id="addToTopOfQueueCheckbox" />
            <label for="addToTopOfQueueCheckbox" class="qbt-translatable" data-i18n="Add to top of queue">Add to top of queue</label>
        </div>
        <div class="formRow">
            <input type="checkbox" id="dontstartdownloads_checkbox" />
            <label for="dontstartdownloads_checkbox" class="qbt-translatable" data-i18n="Do not start the download automatically">Do not start the download automatically</label>
        </div>
        <div class="formRow">
            <label for="stopConditionSelect" class="qbt-translatable" data-i18n="Torrent stop condition:">Torrent stop condition:</label>
            <select id="stopConditionSelect">
                <option value="None" class="qbt-translatable" data-i18n="None">None</option>
                <option value="MetadataReceived" class="qbt-translatable" data-i18n="Metadata received">Metadata received</option>
                <option value="FilesChecked" class="qbt-translatable" data-i18n="Files checked">Files checked</option>
            </select>
        </div>
        <div class="formRow">
            <input type="checkbox" id="deletetorrentfileafter_checkbox" />
            <label for="deletetorrentfileafter_checkbox" class="qbt-translatable" data-i18n="Delete .torrent files afterwards">Delete .torrent files afterwards</label>
        </div>
    </fieldset>

    <div class="formRow">
        <input type="checkbox" id="preallocateall_checkbox" />
        <label for="preallocateall_checkbox" class="qbt-translatable" data-i18n="Pre-allocate disk space for all files">Pre-allocate disk space for all files</label>
    </div>
    <div class="formRow">
        <span id="appendexttr">
            <input type="checkbox" id="appendext_checkbox" />
            <label for="appendext_checkbox" class="qbt-translatable" data-i18n="Append .!qB extension to incomplete files">Append .!qB extension to incomplete files</label>
        </span>
    </div>
    <div class="formRow">
        <span id="unwantedfoldertr">
            <input type="checkbox" id="unwantedfolder_checkbox" />
            <label for="unwantedfolder_checkbox" class="qbt-translatable" data-i18n="Keep unselected files in ".unwanted" folder">Keep unselected files in ".unwanted" folder</label>
        </span>
    </div>

    <fieldset class="settings">
        <legend class="qbt-translatable" data-i18n="Saving Management">Saving Management</legend>
        <table>
            <tr>
                <td>
                    <label class="qbt-translatable" data-i18n="Default Torrent Management Mode:">Default Torrent Management Mode:</label>
                </td>
                <td>
                    <select id="default_tmm_combobox">
                        <option value="false" selected class="qbt-translatable" data-i18n="Manual">Manual</option>
                        <option value="true" class="qbt-translatable" data-i18n="Automatic">Automatic</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>
                    <label class="qbt-translatable" data-i18n="When Torrent Category changed:">When Torrent Category changed:</label>
                </td>
                <td>
                    <select id="torrent_changed_tmm_combobox">
                        <option value="true" class="qbt-translatable" data-i18n="Relocate torrent">Relocate torrent</option>
                        <option value="false" selected class="qbt-translatable" data-i18n="Switch torrent to Manual Mode">Switch torrent to Manual Mode</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>
                    <label class="qbt-translatable" data-i18n="When Default Save Path changed:">When Default Save Path changed:</label>
                </td>
                <td>
                    <select id="save_path_changed_tmm_combobox">
                        <option value="true" class="qbt-translatable" data-i18n="Relocate affected torrents">Relocate affected torrents</option>
                        <option value="false" selected class="qbt-translatable" data-i18n="Switch affected torrents to Manual Mode">Switch affected torrents to Manual Mode</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>
                    <label class="qbt-translatable" data-i18n="When Category Save Path changed:">When Category Save Path changed:</label>
                </td>
                <td>
                    <select id="category_changed_tmm_combobox">
                        <option value="true" class="qbt-translatable" data-i18n="Relocate affected torrents">Relocate affected torrents</option>
                        <option value="false" selected class="qbt-translatable" data-i18n="Switch affected torrents to Manual Mode">Switch affected torrents to Manual Mode</option>
                    </select>
                </td>
            </tr>
        </table>
        <div class="formRow">
            <input type="checkbox" id="use_subcategories_checkbox" />
            <label for="use_subcategories_checkbox" class="qbt-translatable" data-i18n="Use Subcategories">Use Subcategories</label>
        </div>
        <table>
            <tr>
                <td>
                    <label for="savepath_text" class="qbt-translatable" data-i18n="Default Save Path:">Default Save Path:</label>
                </td>
                <td>
                    <input type="text" id="savepath_text" autocorrect="off" autocapitalize="none" />
                </td>
            </tr>
            <tr>
                <td>
                    <input type="checkbox" id="temppath_checkbox" onclick="qBittorrent.Preferences.updateTempDirEnabled();" />
                    <label for="temppath_checkbox" class="qbt-translatable" data-i18n="Keep incomplete torrents in:">Keep incomplete torrents in:</label>
                </td>
                <td>
                    <input type="text" id="temppath_text" autocorrect="off" autocapitalize="none" />
                </td>
            </tr>
            <tr>
                <td>
                    <input type="checkbox" id="exportdir_checkbox" onclick="qBittorrent.Preferences.updateExportDirEnabled();" />
                    <label for="exportdir_checkbox" class="qbt-translatable" data-i18n="Copy .torrent files to:">Copy .torrent files to:</label>
                </td>
                <td>
                    <input type="text" id="exportdir_text" autocorrect="off" autocapitalize="none" />
                </td>
            </tr>
            <tr>
                <td>
                    <input type="checkbox" id="exportdirfin_checkbox" onclick="qBittorrent.Preferences.updateExportDirFinEnabled();" />
                    <label for="exportdirfin_checkbox" class="qbt-translatable" data-i18n="Copy .torrent files for finished downloads to:">Copy .torrent files for finished downloads to:</label>
                </td>
                <td>
                    <input type="text" id="exportdirfin_text" autocorrect="off" autocapitalize="none" />
                </td>
            </tr>
        </table>
    </fieldset>

    <fieldset class="settings">
        <legend class="qbt-translatable" data-i18n="Automatically add torrents from:">Automatically add torrents from:</legend>
        <table id="watched_folders_tab" style="border: 1px solid black;">
            <thead>
                <tr>
                    <th class="qbt-translatable" data-i18n="Monitored Folder">Monitored Folder</th>
                    <th class="qbt-translatable" data-i18n="Override Save Location">Override Save Location</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </fieldset>

    <fieldset class="settings">
        <legend>
            <input type="checkbox" id="excludedFileNamesCheckbox" onclick="qBittorrent.Preferences.updateExcludedFileNamesEnabled();" />
            <label for="excludedFileNamesCheckbox" class="qbt-translatable" data-i18n="Excluded file names">Excluded file names</label>
        </legend>
        <textarea id="excludedFileNamesTextarea" rows="6" cols="70"></textarea>
    </fieldset>

    <fieldset class="settings">
        <legend>
            <input type="checkbox" id="mail_notification_checkbox" onclick="qBittorrent.Preferences.updateMailNotification();" />
            <label for="mail_notification_checkbox" class="qbt-translatable" data-i18n="Email notification upon download completion">Email notification upon download completion</label>
        </legend>
        <table>
            <tr>
                <td>
                    <label for="src_email_txt" class="qbt-translatable" data-i18n="From:">From:</label>
                </td>
                <td>
                    <input type="text" id="src_email_txt" />
                </td>
            </tr>
            <tr>
                <td>
                    <label for="dest_email_txt" class="qbt-translatable" data-i18n="To:">To:</label>
                </td>
                <td>
                    <input type="text" id="dest_email_txt" />
                </td>
            </tr>
            <tr>
                <td>
                    <label for="smtp_server_txt" class="qbt-translatable" data-i18n="SMTP server:">SMTP server:</label>
                </td>
                <td>
                    <input type="text" id="smtp_server_txt" />
                </td>
            </tr>
        </table>
        <div class="formRow">
            <input type="checkbox" id="mail_ssl_checkbox" /><label for="mail_ssl_checkbox" class="qbt-translatable" data-i18n="This server requires a secure connection (SSL)">This server requires a secure connection (SSL)</label>
        </div>
        <fieldset class="settings">
            <legend>
                <input type="checkbox" id="mail_auth_checkbox" onclick="qBittorrent.Preferences.updateMailAuthSettings();" />
                <label for="mail_auth_checkbox" class="qbt-translatable" data-i18n="Authentication">Authentication</label>
            </legend>
            <table>
                <tr>
                    <td>
                        <label for="mail_username_text" class="qbt-translatable" data-i18n="Username:">Username:</label>
                    </td>
                    <td>
                        <input type="text" id="mail_username_text" />
                    </td>
                </tr>
                <tr>
                    <td>
                        <label for="mail_password_text" class="qbt-translatable" data-i18n="Password:">Password:</label>
                    </td>
                    <td>
                        <input type="password" id="mail_password_text" />
                    </td>
                </tr>
            </table>
        </fieldset>
        <div class="formRow">
            <input type="button" id="mail_test_button" class="qbt-translatable" data-i18n="[value]Send test email" value="Send test email" onclick="qBittorrent.Preferences.sendTestEmail();" />
        </div>
    </fieldset>

    <fieldset class="settings">
        <legend>
            QBT_TR(Run external program)QBT_TR[CONTEXT=OptionsDialog]
        </legend>
        <div class="formRow">
            <input type="checkbox" id="autorunOnTorrentAddedCheckbox" onclick="qBittorrent.Preferences.updateAutoRunOnTorrentAdded();" />
            <label for="autorunOnTorrentAddedCheckbox" class="qbt-translatable" data-i18n="Run external program on torrent added">Run external program on torrent added</label>
            <input type="text" id="autorunOnTorrentAddedProgram" style="width: 400px;" />
        </div>
        <div class="formRow">
            <input type="checkbox" id="autorun_checkbox" onclick="qBittorrent.Preferences.updateAutoRun();" />
            <label for="autorun_checkbox" class="qbt-translatable" data-i18n="Run external program on torrent finished">Run external program on torrent finished</label>
            <input type="text" id="autorunProg_txt" style="width: 400px;" />
        </div>
        <div style="font-style: italic;" class="qbt-translatable" data-i18n="Supported parameters (case sensitive):">Supported parameters (case sensitive):
            <ul>
                <li class="qbt-translatable" data-i18n="%N: Torrent name">%N: Torrent name</li>
                <li class="qbt-translatable" data-i18n="%L: Category">%L: Category</li>
                <li class="qbt-translatable" data-i18n="%G: Tags (separated by comma)">%G: Tags (separated by comma)</li>
                <li class="qbt-translatable" data-i18n="%F: Content path (same as root path for multifile torrent)">%F: Content path (same as root path for multifile torrent)</li>
                <li class="qbt-translatable" data-i18n="%R: Root path (first torrent subdirectory path)">%R: Root path (first torrent subdirectory path)</li>
                <li class="qbt-translatable" data-i18n="%D: Save path">%D: Save path</li>
                <li class="qbt-translatable" data-i18n="%C: Number of files">%C: Number of files</li>
                <li class="qbt-translatable" data-i18n="%Z: Torrent size (bytes)">%Z: Torrent size (bytes)</li>
                <li class="qbt-translatable" data-i18n="%T: Current tracker">%T: Current tracker</li>
                <li class="qbt-translatable" data-i18n="%I: Info hash v1">%I: Info hash v1</li>
                <li class="qbt-translatable" data-i18n="%J: Info hash v2">%J: Info hash v2</li>
                <li class="qbt-translatable" data-i18n="%K: Torrent ID">%K: Torrent ID</li>
            </ul>
            QBT_TR(Tip: Encapsulate parameter with quotation marks to avoid text being cut off at whitespace (e.g., "%N"))QBT_TR[CONTEXT=OptionsDialog]
        </div>
    </fieldset>
</div>

<div id="ConnectionTab" class="PrefTab invisible">
    <div class="formRow">
        <label class="qbt-translatable" data-i18n="Peer connection protocol:">Peer connection protocol:</label>
        <select id="enable_protocol_combobox">
            <option value="0" selected class="qbt-translatable" data-i18n="TCP and μTP">TCP and μTP</option>
            <option value="1">TCP</option>
            <option value="2">μTP</option>
        </select>
    </div>
    <fieldset class="settings">
        <legend class="qbt-translatable" data-i18n="Listening Port">Listening Port</legend>
        <div class="formRow">
            <label for="port_value" class="qbt-translatable" data-i18n="Port used for incoming connections:">Port used for incoming connections:</label>
            <input type="text" id="port_value" style="width: 4em;" class="qbt-translatable" data-i18n="[title]Set to 0 to let your system pick an unused port" title="Set to 0 to let your system pick an unused port" />
            <button type="button" style="margin-left: 1em;" onclick="qBittorrent.Preferences.generateRandomPort();" class="qbt-translatable" data-i18n="Random">Random</button>
        </div>
        <div class="formRow">
            <input type="checkbox" id="upnp_checkbox" />
            <label for="upnp_checkbox" class="qbt-translatable" data-i18n="Use UPnP / NAT-PMP port forwarding from my router">Use UPnP / NAT-PMP port forwarding from my router</label>
        </div>
    </fieldset>

    <fieldset class="settings">
        <legend class="qbt-translatable" data-i18n="Connections Limits">Connections Limits</legend>
        <table>
            <tr>
                <td>
                    <input type="checkbox" id="max_connec_checkbox" onclick="qBittorrent.Preferences.updateMaxConnecEnabled();" />
                    <label for="max_connec_checkbox" class="qbt-translatable" data-i18n="Global maximum number of connections:">Global maximum number of connections:</label>
                </td>
                <td><input type="text" id="max_connec_value" style="width: 4em;" /></td>
            </tr>
            <tr>
                <td>
                    <input type="checkbox" id="max_connec_per_torrent_checkbox" onclick="qBittorrent.Preferences.updateMaxConnecPerTorrentEnabled();" />
                    <label for="max_connec_per_torrent_checkbox" class="qbt-translatable" data-i18n="Maximum number of connections per torrent:">Maximum number of connections per torrent:</label>
                </td>
                <td><input type="text" id="max_connec_per_torrent_value" style="width: 4em;" /></td>
            </tr>
            <tr>
                <td>
                    <input type="checkbox" id="max_uploads_checkbox" onclick="qBittorrent.Preferences.updateMaxUploadsEnabled();" />
                    <label for="max_uploads_checkbox" class="qbt-translatable" data-i18n="Global maximum number of upload slots:">Global maximum number of upload slots:</label>
                </td>
                <td><input type="text" id="max_uploads_value" style="width: 4em;" /></td>
            </tr>
            <tr>
                <td>
                    <input type="checkbox" id="max_uploads_per_torrent_checkbox" onclick="qBittorrent.Preferences.updateMaxUploadsPerTorrentEnabled();" />
                    <label for="max_uploads_per_torrent_checkbox" class="qbt-translatable" data-i18n="Maximum number of upload slots per torrent:">Maximum number of upload slots per torrent:</label>
                </td>
                <td><input type="text" id="max_uploads_per_torrent_value" style="width: 4em;" /></td>
            </tr>
        </table>
    </fieldset>

    <fieldset class="settings" id="fieldsetI2p">
        <legend>
            <input type="checkbox" id="i2pEnabledCheckbox" onclick="qBittorrent.Preferences.updateI2PSettingsEnabled();" />
            <label for="i2pEnabledCheckbox" class="qbt-translatable" data-i18n="I2P (Experimental)">I2P (Experimental)</label>
        </legend>
        <table>
            <tr>
                <td>
                    <label for="i2pAddress" class="qbt-translatable" data-i18n="Host:">Host:</label>
                </td>
                <td>
                    <input type="text" id="i2pAddress" />
                </td>
                <td>
                    <label for="i2pPort" class="qbt-translatable" data-i18n="Port:">Port:</label>
                </td>
                <td>
                    <input type="number" id="i2pPort" min="0" max="65535" onchange="qBittorrent.Preferences.numberInputLimiter(this);" style="width: 5em;" />
                </td>
            </tr>
        </table>
        <div class="formRow">
            <input type="checkbox" id="i2pMixedMode" class="qbt-translatable" data-i18n="[title]If &quot;mixed mode&quot; is enabled, I2P torrents are allowed to also get peers from other sources than the tracker, and connect to regular IPs, not providing any anonymization. This may be useful if the user is not interested in the anonymization of I2P, but still wants to be able to connect to I2P peers." title="If &quot;mixed mode&quot; is enabled, I2P torrents are allowed to also get peers from other sources than the tracker, and connect to regular IPs, not providing any anonymization. This may be useful if the user is not interested in the anonymization of I2P, but still wants to be able to connect to I2P peers." />
            <label for="i2pMixedMode" class="qbt-translatable" data-i18n="Mixed mode">Mixed mode</label>
        </div>
    </fieldset>

    <fieldset class="settings">
        <legend class="qbt-translatable" data-i18n="Proxy Server">Proxy Server</legend>
        <table>
            <tr>
                <td>
                    <label for="peer_proxy_type_select" class="qbt-translatable" data-i18n="Type:">Type:</label>
                </td>
                <td>
                    <select id="peer_proxy_type_select" onchange="qBittorrent.Preferences.updatePeerProxySettings();">
                        <option value="None" class="qbt-translatable" data-i18n="(None)">(None)</option>
                        <option value="SOCKS4" class="qbt-translatable" data-i18n="SOCKS4">SOCKS4</option>
                        <option value="SOCKS5" class="qbt-translatable" data-i18n="SOCKS5">SOCKS5</option>
                        <option value="HTTP" class="qbt-translatable" data-i18n="HTTP">HTTP</option>
                    </select>
                </td>
                <td>
                    <label for="peer_proxy_host_text" class="qbt-translatable" data-i18n="Host:">Host:</label>
                </td>
                <td>
                    <input type="text" id="peer_proxy_host_text" />
                </td>
                <td>
                    <label for="peer_proxy_port_value" class="qbt-translatable" data-i18n="Port:">Port:</label>
                </td>
                <td>
                    <input type="text" id="peer_proxy_port_value" style="width: 4em;" />
                </td>
            </tr>
        </table>

        <div class="formRow">
            <input type="checkbox" id="proxyHostnameLookupCheckbox" class="qbt-translatable" data-i18n="[title]If checked, hostname lookups are done via the proxy." title="If checked, hostname lookups are done via the proxy." />
            <label for="proxyHostnameLookupCheckbox" class="qbt-translatable" data-i18n="Perform hostname lookup via proxy">Perform hostname lookup via proxy</label>
        </div>

        <fieldset class="settings">
            <legend>
                <input type="checkbox" id="peer_proxy_auth_checkbox" onclick="qBittorrent.Preferences.updatePeerProxyAuthSettings();" />
                <label for="peer_proxy_auth_checkbox" class="qbt-translatable" data-i18n="Authentication">Authentication</label>
            </legend>
            <table>
                <tr>
                    <td>
                        <label for="peer_proxy_username_text" class="qbt-translatable" data-i18n="Username:">Username:</label>
                    </td>
                    <td>
                        <input type="text" id="peer_proxy_username_text" />
                    </td>
                </tr>
                <tr>
                    <td>
                        <label for="peer_proxy_password_text" class="qbt-translatable" data-i18n="Password:">Password:</label>
                    </td>
                    <td>
                        <input type="password" id="peer_proxy_password_text" />
                    </td>
                </tr>
            </table>
            <div class="formRow">
                <span class="qbt-translatable" data-i18n="Info: The password is saved unencrypted">Info: The password is saved unencrypted</span>
            </div>
        </fieldset>

        <fieldset class="settings">
            <legend>
                <input type="checkbox" id="proxy_bittorrent_checkbox" onclick="qBittorrent.Preferences.updatePeerProxySettings();" />
                <label for="proxy_bittorrent_checkbox" class="qbt-translatable" data-i18n="Use proxy for BitTorrent purposes">Use proxy for BitTorrent purposes</label>
            </legend>
            <div class="formRow">
                <input type="checkbox" id="use_peer_proxy_checkbox" />
                <label for="use_peer_proxy_checkbox" class="qbt-translatable" data-i18n="Use proxy for peer connections">Use proxy for peer connections</label>
            </div>
        </fieldset>
        <div class="formRow">
            <input type="checkbox" id="proxy_rss_checkbox" />
            <label for="proxy_rss_checkbox" class="qbt-translatable" data-i18n="Use proxy for RSS purposes">Use proxy for RSS purposes</label>
        </div>
        <div class="formRow">
            <input type="checkbox" id="proxy_misc_checkbox" />
            <label for="proxy_misc_checkbox" class="qbt-translatable" data-i18n="Use proxy for general purposes">Use proxy for general purposes</label>
        </div>
    </fieldset>

    <fieldset class="settings">
        <legend>
            <label class="qbt-translatable" data-i18n="IP Filtering">IP Filtering</label>
        </legend>
        <div class="formRow">
            <input type="checkbox" id="ipfilter_text_checkbox" onclick="qBittorrent.Preferences.updateFilterSettings();" />
            <label for="ipfilter_text_checkbox" class="qbt-translatable" data-i18n="Filter path (.dat, .p2p, .p2b):">Filter path (.dat, .p2p, .p2b):</label>
            <input type="text" id="ipfilter_text" />
        </div>
        <div class="formRow">
            <input type="checkbox" id="ipfilter_trackers_checkbox" />
            <label for="ipfilter_trackers_checkbox" class="qbt-translatable" data-i18n="Apply to trackers">Apply to trackers</label>
        </div>
        <div class="formRow">
            <fieldset class="settings">
                <legend class="qbt-translatable" data-i18n="Manually banned IP addresses...">Manually banned IP addresses...</legend>
                <textarea id="banned_IPs_textarea" rows="5" cols="70"></textarea>
            </fieldset>
        </div>
    </fieldset>
</div>

<div id="SpeedTab" class="PrefTab invisible">
    <fieldset class="settings">
        <legend class="qbt-translatable" data-i18n="Global Rate Limits">Global Rate Limits</legend>
        <table>
            <tr>
                <td rowspan="2">
                    <img src="images/slow_off.svg" style="height: 1.5em;" class="qbt-translatable" data-i18n="[alt]Alternative speed limits" alt="Alternative speed limits">
                </td>
                <td><label for="up_limit_value" class="qbt-translatable" data-i18n="Upload:">Upload:</label></td>
                <td><input type="number" id="up_limit_value" style="width: 4em;" min="0" />&nbsp;&nbsp;QBT_TR(KiB/s)QBT_TR[CONTEXT=OptionsDialog]</td>
            </tr>
            <tr>
                <td><label for="dl_limit_value" class="qbt-translatable" data-i18n="Download:">Download:</label></td>
                <td><input type="number" id="dl_limit_value" style="width: 4em;" min="0" />&nbsp;&nbsp;QBT_TR(KiB/s)QBT_TR[CONTEXT=OptionsDialog]</td>
            </tr>
        </table>
        <i class="qbt-translatable" data-i18n="0 means unlimited">0 means unlimited</i>
    </fieldset>

    <fieldset class="settings">
        <legend class="qbt-translatable" data-i18n="Alternative Rate Limits">Alternative Rate Limits</legend>
        <table>
            <tr>
                <td rowspan="2">
                    <img src="images/slow.svg" style="height: 1.5em;" class="qbt-translatable" data-i18n="[alt]Alternative speed limits" alt="Alternative speed limits">
                </td>
                <td><label for="alt_up_limit_value" class="qbt-translatable" data-i18n="Upload:">Upload:</label></td>
                <td><input type="number" id="alt_up_limit_value" style="width: 4em;" min="0" />&nbsp;&nbsp;QBT_TR(KiB/s)QBT_TR[CONTEXT=OptionsDialog]</td>
            </tr>
            <tr>
                <td><label for="alt_dl_limit_value" class="qbt-translatable" data-i18n="Download:">Download:</label></td>
                <td><input type="number" id="alt_dl_limit_value" style="width: 4em;" min="0" />&nbsp;&nbsp;QBT_TR(KiB/s)QBT_TR[CONTEXT=OptionsDialog]</td>
            </tr>
        </table>
        <i class="qbt-translatable" data-i18n="0 means unlimited">0 means unlimited</i>

        <fieldset class="settings">
            <legend>
                <input type="checkbox" id="limitSchedulingCheckbox" onclick="qBittorrent.Preferences.updateSchedulingEnabled();" />
                <label for="limitSchedulingCheckbox" class="qbt-translatable" data-i18n="Schedule the use of alternative rate limits">Schedule the use of alternative rate limits</label>
            </legend>
            <div class="formRow">
                QBT_TR(From:)QBT_TR[CONTEXT=OptionsDialog]
                <input type="text" id="schedule_from_hour" style="width: 1.5em;" />:<input type="text" id="schedule_from_min" style="width: 1.5em;" />
                QBT_TR(To:)QBT_TR[CONTEXT=OptionsDialog]
                <input type="text" id="schedule_to_hour" style="width: 1.5em;" />:<input type="text" id="schedule_to_min" style="width: 1.5em;" />
            </div>
            <div class="formRow">
                QBT_TR(When:)QBT_TR[CONTEXT=OptionsDialog]
                <select id="schedule_freq_select">
                    <option value="0" class="qbt-translatable" data-i18n="Every day">Every day</option>
                    <option value="1" class="qbt-translatable" data-i18n="Weekdays">Weekdays</option>
                    <option value="2" class="qbt-translatable" data-i18n="Weekends">Weekends</option>
                    <option value="3" class="qbt-translatable" data-i18n="Monday">Monday</option>
                    <option value="4" class="qbt-translatable" data-i18n="Tuesday">Tuesday</option>
                    <option value="5" class="qbt-translatable" data-i18n="Wednesday">Wednesday</option>
                    <option value="6" class="qbt-translatable" data-i18n="Thursday">Thursday</option>
                    <option value="7" class="qbt-translatable" data-i18n="Friday">Friday</option>
                    <option value="8" class="qbt-translatable" data-i18n="Saturday">Saturday</option>
                    <option value="9" class="qbt-translatable" data-i18n="Sunday">Sunday</option>
                </select>
            </div>
        </fieldset>
    </fieldset>

    <fieldset class="settings">
        <legend class="qbt-translatable" data-i18n="Rate Limits Settings">Rate Limits Settings</legend>
        <div class="formRow">
            <input type="checkbox" id="limit_utp_rate_checkbox" />
            <label for="limit_utp_rate_checkbox" class="qbt-translatable" data-i18n="Apply rate limit to µTP protocol">Apply rate limit to µTP protocol</label>
        </div>
        <div class="formRow">
            <input type="checkbox" id="limit_tcp_overhead_checkbox" />
            <label for="limit_tcp_overhead_checkbox" class="qbt-translatable" data-i18n="Apply rate limit to transport overhead">Apply rate limit to transport overhead</label>
        </div>
        <div class="formRow">
            <input type="checkbox" id="limit_lan_peers_checkbox" />
            <label for="limit_lan_peers_checkbox" class="qbt-translatable" data-i18n="Apply rate limit to peers on LAN">Apply rate limit to peers on LAN</label>
        </div>
    </fieldset>
</div>

<div id="BittorrentTab" class="PrefTab invisible">
    <fieldset class="settings">
        <legend class="qbt-translatable" data-i18n="Privacy">Privacy</legend>
        <div class="formRow">
            <input type="checkbox" id="dht_checkbox" />
            <label for="dht_checkbox" class="qbt-translatable" data-i18n="Enable DHT (decentralized network) to find more peers">Enable DHT (decentralized network) to find more peers</label>
        </div>
        <div class="formRow">
            <input type="checkbox" id="pex_checkbox" />
            <label for="pex_checkbox" class="qbt-translatable" data-i18n="Enable Peer Exchange (PeX) to find more peers">Enable Peer Exchange (PeX) to find more peers</label>
        </div>
        <div class="formRow">
            <input type="checkbox" id="lsd_checkbox" />
            <label for="lsd_checkbox" class="qbt-translatable" data-i18n="Enable Local Peer Discovery to find more peers">Enable Local Peer Discovery to find more peers</label>
        </div>
        <div class="formRow">
            <label for="encryption_select" class="qbt-translatable" data-i18n="Encryption mode:">Encryption mode:</label>
            <select id="encryption_select">
                <option value="0" class="qbt-translatable" data-i18n="Allow encryption">Allow encryption</option>
                <option value="1" class="qbt-translatable" data-i18n="Require encryption">Require encryption</option>
                <option value="2" class="qbt-translatable" data-i18n="Disable encryption">Disable encryption</option>
            </select>
        </div>
        <div class="formRow">
            <input type="checkbox" id="anonymous_mode_checkbox" />
            <label for="anonymous_mode_checkbox" class="qbt-translatable" data-i18n="Enable anonymous mode">Enable anonymous mode (<a target="_blank" href="https://github.com/qbittorrent/qBittorrent/wiki/Anonymous-Mode" class="qbt-translatable" data-i18n="More information">More information</a>)</label>
        </div>
    </fieldset>

    <div class="formRow">
        <label for="maxActiveCheckingTorrents" class="qbt-translatable" data-i18n="Max active checking torrents:">Max active checking torrents:</label>
        <input type="number" id="maxActiveCheckingTorrents" style="width: 4em;" min="-1" />
    </div>

    <fieldset class="settings">
        <legend>
            <input type="checkbox" id="queueing_checkbox" onclick="qBittorrent.Preferences.updateQueueingSystem();" />
            <label for="queueing_checkbox" class="qbt-translatable" data-i18n="Torrent Queueing">Torrent Queueing</label>
        </legend>
        <table>
            <tr>
                <td>
                    <label for="max_active_dl_value" class="qbt-translatable" data-i18n="Maximum active downloads:">Maximum active downloads:</label>
                </td>
                <td>
                    <input type="text" id="max_active_dl_value" style="width: 4em;" />
                </td>
            </tr>
            <tr>
                <td>
                    <label for="max_active_up_value" class="qbt-translatable" data-i18n="Maximum active uploads:">Maximum active uploads:</label>
                </td>
                <td>
                    <input type="text" id="max_active_up_value" style="width: 4em;" />
                </td>
            </tr>
            <tr>
                <td>
                    <label for="max_active_to_value" class="qbt-translatable" data-i18n="Maximum active torrents:">Maximum active torrents:</label>
                </td>
                <td>
                    <input type="text" id="max_active_to_value" style="width: 4em;" />
                </td>
            </tr>
        </table>
        <fieldset class="settings">
            <legend>
                <input type="checkbox" id="dont_count_slow_torrents_checkbox" onclick="qBittorrent.Preferences.updateSlowTorrentsSettings();" />
                <label for="dont_count_slow_torrents_checkbox" class="qbt-translatable" data-i18n="Do not count slow torrents in these limits">Do not count slow torrents in these limits</label>
            </legend>
            <table>
                <tr>
                    <td>
                        <label for="dl_rate_threshold" class="qbt-translatable" data-i18n="Download rate threshold:">Download rate threshold:</label>
                    </td>
                    <td>
                        <input type="text" id="dl_rate_threshold" style="width: 4em;" />&nbsp;&nbsp;QBT_TR(KiB/s)QBT_TR[CONTEXT=OptionsDialog]
                    </td>
                </tr>
                <tr>
                    <td>
                        <label for="ul_rate_threshold" class="qbt-translatable" data-i18n="Upload rate threshold:">Upload rate threshold:</label>
                    </td>
                    <td>
                        <input type="text" id="ul_rate_threshold" style="width: 4em;" />&nbsp;&nbsp;QBT_TR(KiB/s)QBT_TR[CONTEXT=OptionsDialog]
                    </td>
                </tr>
                <tr>
                    <td>
                        <label for="torrent_inactive_timer" class="qbt-translatable" data-i18n="Torrent inactivity timer:">Torrent inactivity timer:</label>
                    </td>
                    <td>
                        <input type="text" id="torrent_inactive_timer" style="width: 4em;" />&nbsp;&nbsp;QBT_TR(seconds)QBT_TR[CONTEXT=OptionsDialog]
                    </td>
                </tr>
            </table>
        </fieldset>
    </fieldset>

    <fieldset class="settings">
        <legend class="qbt-translatable" data-i18n="Seeding Limits">Seeding Limits</legend>
        <table>
            <tr>
                <td>
                    <input type="checkbox" id="max_ratio_checkbox" onclick="qBittorrent.Preferences.updateMaxRatioTimeEnabled();" />
                    <label for="max_ratio_checkbox" class="qbt-translatable" data-i18n="When ratio reaches">When ratio reaches</label>
                </td>
                <td>
                    <input type="text" id="max_ratio_value" style="width: 4em;" />
                </td>
            </tr>
            <tr>
                <td>
                    <input type="checkbox" id="max_seeding_time_checkbox" onclick="qBittorrent.Preferences.updateMaxRatioTimeEnabled();" />
                    <label for="max_seeding_time_checkbox" class="qbt-translatable" data-i18n="When total seeding time reaches">When total seeding time reaches</label>
                </td>
                <td>
                    <input type="text" id="max_seeding_time_value" style="width: 4em;" / class="qbt-translatable" data-i18n="minutes">minutes
                </td>
            </tr>
            <tr>
                <td>
                    <input type="checkbox" id="max_inactive_seeding_time_checkbox" onclick="qBittorrent.Preferences.updateMaxRatioTimeEnabled();" />
                    <label for="max_inactive_seeding_time_checkbox" class="qbt-translatable" data-i18n="When inactive seeding time reaches">When inactive seeding time reaches</label>
                </td>
                <td>
                    <input type="text" id="max_inactive_seeding_time_value" style="width: 4em;" / class="qbt-translatable" data-i18n="minutes">minutes
                </td>
            </tr>
            <tr>
                <td style="text-align: right;"><label for="max_ratio_act" class="qbt-translatable" data-i18n="then">then</label></td>
                <td>
                    <select id="max_ratio_act">
                        <option value="0" class="qbt-translatable" data-i18n="Pause torrent">Pause torrent</option>
                        <option value="1" class="qbt-translatable" data-i18n="Remove torrent">Remove torrent</option>
                        <option value="3" class="qbt-translatable" data-i18n="Remove torrent and its files">Remove torrent and its files</option>
                        <option value="2" class="qbt-translatable" data-i18n="Enable super seeding for torrent">Enable super seeding for torrent</option>
                    </select>
                </td>
            </tr>
        </table>
    </fieldset>

    <fieldset class="settings">
        <legend>
            <input type="checkbox" id="add_trackers_checkbox" onclick="qBittorrent.Preferences.updateAddTrackersEnabled();" />
            <label for="add_trackers_checkbox" class="qbt-translatable" data-i18n="Automatically add these trackers to new downloads:">Automatically add these trackers to new downloads:</label>
        </legend>
        <textarea id="add_trackers_textarea" rows="5" cols="70"></textarea>
    </fieldset>
</div>

<div id="RSSTab" class="PrefTab invisible">
    <fieldset class="settings">
        <legend class="qbt-translatable" data-i18n="RSS Reader">RSS Reader</legend>
        <div class="formRow">
            <input type="checkbox" id="enable_fetching_rss_feeds_checkbox" />
            <label for="enable_fetching_rss_feeds_checkbox" class="qbt-translatable" data-i18n="Enable fetching RSS feeds">Enable fetching RSS feeds</label>
        </div>
        <table>
            <tr>
                <td>
                    <label for="feed_refresh_interval" class="qbt-translatable" data-i18n="Feeds refresh interval:">Feeds refresh interval:</label>
                </td>
                <td>
                    <input type="text" id="feed_refresh_interval" style="width: 4em;" />&nbsp;&nbsp;QBT_TR( min)QBT_TR[CONTEXT=OptionsDialog]
                </td>
            </tr>
            <tr>
                <td>
                    <label for="feedFetchDelay" class="qbt-translatable" data-i18n="Same host request delay:">Same host request delay:</label>
                </td>
                <td>
                    <input type="text" id="feedFetchDelay" style="width: 4em;" />&nbsp;&nbsp;QBT_TR( sec)QBT_TR[CONTEXT=OptionsDialog]
                </td>
            </tr>
            <tr>
                <td>
                    <label for="maximum_article_number" class="qbt-translatable" data-i18n="Maximum number of articles per feed:">Maximum number of articles per feed:</label>
                </td>
                <td>
                    <input type="text" id="maximum_article_number" style="width: 4em;" />
                </td>
            </tr>
        </table>
    </fieldset>

    <fieldset class="settings">
        <legend class="qbt-translatable" data-i18n="RSS Torrent Auto Downloader">RSS Torrent Auto Downloader</legend>
        <div class="formRow">
            <input type="checkbox" id="enable_auto_downloading_rss_torrents_checkbox" />
            <label for="enable_auto_downloading_rss_torrents_checkbox" class="qbt-translatable" data-i18n="Enable auto downloading of RSS torrents">Enable auto downloading of RSS torrents</label>
        </div>
        <button type="button" style="margin: 0 1em; width: calc(100% - 2.2em)" onclick="window.qBittorrent.Rss.openRssDownloader();" class="qbt-translatable" data-i18n="Edit auto downloading rules...">Edit auto downloading rules...</button>
    </fieldset>

    <fieldset class="settings">
        <legend class="qbt-translatable" data-i18n="RSS Smart Episode Filter">RSS Smart Episode Filter</legend>
        <div class="formRow">
            <input type="checkbox" id="downlock_repack_proper_episodes" />

            <label for="downlock_repack_proper_episodes" class="qbt-translatable" data-i18n="Download REPACK/PROPER episodes">Download REPACK/PROPER episodes</label>
        </div>
        <label for="rss_filter_textarea" class="qbt-translatable" data-i18n="Filters:">Filters:</label><br>
        <textarea id="rss_filter_textarea" rows="6" cols="70"></textarea>
    </fieldset>
</div>

<div id="WebUITab" class="PrefTab invisible">
    <fieldset class="settings">
        <legend class="qbt-translatable" data-i18n="Web User Interface (Remote control)">Web User Interface (Remote control)</legend>
        <table>
            <tr>
                <td>
                    <label for="webui_address_value" class="qbt-translatable" data-i18n="IP address:">IP address:</label>
                </td>
                <td>
                    <input type="text" id="webui_address_value" />
                    <label for="webui_port_value" style="margin-left: 10px;" class="qbt-translatable" data-i18n="Port:">Port:</label>
                    <input type="text" id="webui_port_value" style="width: 4em;" />
                </td>
            </tr>
        </table>
        <div class="formRow">
            <input type="checkbox" id="webui_upnp_checkbox" />
            <label for="webui_upnp_checkbox" class="qbt-translatable" data-i18n="Use UPnP / NAT-PMP to forward the port from my router">Use UPnP / NAT-PMP to forward the port from my router</label>
        </div>
        <fieldset class="settings">
            <legend>
                <input type="checkbox" id="use_https_checkbox" onclick="qBittorrent.Preferences.updateHttpsSettings();" />
                <label for="use_https_checkbox" class="qbt-translatable" data-i18n="Use HTTPS instead of HTTP">Use HTTPS instead of HTTP</label>
            </legend>
            <table>
                <tr>
                    <td>
                        <label for="ssl_cert_text" class="qbt-translatable" data-i18n="Certificate:">Certificate:</label>
                    </td>
                    <td>
                        <input type="text" id="ssl_cert_text" style="width: 30em;" />
                    </td>
                </tr>
                <tr>
                    <td>
                        <label for="ssl_key_text" class="qbt-translatable" data-i18n="Key:">Key:</label>
                    </td>
                    <td>
                        <input type="text" id="ssl_key_text" style="width: 30em;" />
                    </td>
                </tr>
            </table>
            <div style="padding-left: 10px;"><a target="_blank" href="https://httpd.apache.org/docs/current/ssl/ssl_faq.html#aboutcerts" class="qbt-translatable" data-i18n="Information about certificates">Information about certificates</a></div>
        </fieldset>

        <fieldset class="settings">
            <legend class="qbt-translatable" data-i18n="Authentication">Authentication</legend>
            <table>
                <tr>
                    <td>
                        <label for="webui_username_text" class="qbt-translatable" data-i18n="Username:">Username:</label>
                    </td>
                    <td>
                        <input type="text" id="webui_username_text" />
                    </td>
                </tr>
                <tr>
                    <td>
                        <label for="webui_password_text" class="qbt-translatable" data-i18n="Password:">Password:</label>
                    </td>
                    <td>
                        <input type="password" id="webui_password_text" class="qbt-translatable" data-i18n="[placeholder]Change current password" placeholder="Change current password" autocomplete="new-password" />
                    </td>
                </tr>
            </table>
            <div class="formRow">
                <input type="checkbox" id="bypass_local_auth_checkbox" />
                <label for="bypass_local_auth_checkbox" class="qbt-translatable" data-i18n="Bypass authentication for clients on localhost">Bypass authentication for clients on localhost</label>
            </div>
            <div class="formRow">
                <input type="checkbox" id="bypass_auth_subnet_whitelist_checkbox" onclick="qBittorrent.Preferences.updateBypasssAuthSettings();" />
                <label for="bypass_auth_subnet_whitelist_checkbox" class="qbt-translatable" data-i18n="Bypass authentication for clients in whitelisted IP subnets">Bypass authentication for clients in whitelisted IP subnets</label>
            </div>
            <div class="formRow" style="padding-left: 30px; padding-top: 5px;">
                <textarea id="bypass_auth_subnet_whitelist_textarea" rows="5" cols="48" class="qbt-translatable" data-i18n="[placeholder]Example: 172.17.32.0/24, fdff:ffff:c8::/40" placeholder="Example: 172.17.32.0/24, fdff:ffff:c8::/40"></textarea>
            </div>
            <table>
                <tr>
                    <td><label for="webUIMaxAuthFailCountInput" class="qbt-translatable" data-i18n="Ban client after consecutive failures:">Ban client after consecutive failures:</label></td>
                    <td><input type="number" id="webUIMaxAuthFailCountInput" style="width: 4em;" min="0" /></td>
                </tr>
                <tr>
                    <td style="text-align: right;"><label for="webUIBanDurationInput" class="qbt-translatable" data-i18n="ban for:">ban for:</label></td>
                    <td><input type="number" id="webUIBanDurationInput" style="width: 4em;" min="1" / class="qbt-translatable" data-i18n="seconds">seconds</td>
                </tr>
            </table>
            <table>
                <tr>
                    <td><label for="webUISessionTimeoutInput" class="qbt-translatable" data-i18n="Session timeout:">Session timeout:</label></td>
                    <td><input type="number" id="webUISessionTimeoutInput" style="width: 4em;" min="0" />&nbsp;&nbsp;QBT_TR(seconds)QBT_TR[CONTEXT=OptionsDialog]</td>
                </tr>
            </table>
        </fieldset>

        <fieldset class="settings">
            <legend><input type="checkbox" id="use_alt_webui_checkbox" onclick="qBittorrent.Preferences.updateAlternativeWebUISettings();" />
                <label for="use_alt_webui_checkbox" class="qbt-translatable" data-i18n="Use alternative WebUI">Use alternative WebUI</label>
            </legend>
            <div class="formRow">
                <label for="webui_files_location_textarea" class="qbt-translatable" data-i18n="Files location:">Files location:</label>
                <input type="text" id="webui_files_location_textarea" />
            </div>
        </fieldset>

        <fieldset class="settings">
            <legend class="qbt-translatable" data-i18n="Security">Security</legend>
            <div class="formRow">
                <input type="checkbox" id="clickjacking_protection_checkbox" />
                <label for="clickjacking_protection_checkbox" class="qbt-translatable" data-i18n="Enable clickjacking protection">Enable clickjacking protection</label>
            </div>
            <div class="formRow">
                <input type="checkbox" id="csrf_protection_checkbox" />
                <label for="csrf_protection_checkbox" class="qbt-translatable" data-i18n="Enable Cross-Site Request Forgery (CSRF) protection">Enable Cross-Site Request Forgery (CSRF) protection</label>
            </div>
            <div class="formRow">
                <input type="checkbox" id="secureCookieCheckbox" />
                <label for="secureCookieCheckbox" class="qbt-translatable" data-i18n="Enable cookie Secure flag (requires HTTPS)">Enable cookie Secure flag (requires HTTPS)</label>
            </div>

            <fieldset class="settings">
                <legend>
                    <input type="checkbox" id="host_header_validation_checkbox" onclick="qBittorrent.Preferences.updateHostHeaderValidationSettings();" />
                    <label for="host_header_validation_checkbox" class="qbt-translatable" data-i18n="Enable Host header validation">Enable Host header validation</label>
                </legend>
                <table>
                    <tr>
                        <td>
                            <label for="webui_domain_textarea" class="qbt-translatable" data-i18n="Server domains:">Server domains:</label>
                        </td>
                        <td>
                            <textarea id="webui_domain_textarea" rows="1" cols="60" title="QBT_TR(Whitelist for filtering HTTP Host header values.
In order to defend against DNS rebinding attack,
you should put in domain names used by WebUI server.

Use ';' to split multiple entries. Can use wildcard '*'.)QBT_TR[CONTEXT=OptionsDialog]"></textarea>
                        </td>
                    </tr>
                </table>
            </fieldset>
        </fieldset>

        <fieldset class="settings">
            <legend>
                <input type="checkbox" id="webUIUseCustomHTTPHeadersCheckbox" onclick="qBittorrent.Preferences.updateWebUICustomHTTPHeadersSettings();" />
                <label for="webUIUseCustomHTTPHeadersCheckbox" class="qbt-translatable" data-i18n="Add custom HTTP headers">Add custom HTTP headers</label>
            </legend>
            <textarea id="webUICustomHTTPHeadersTextarea" class="qbt-translatable" data-i18n="[placeholder]Header: value pairs, one per line" placeholder="Header: value pairs, one per line" style="width: 90%;"></textarea>
        </fieldset>

        <fieldset class="settings">
            <legend>
                <input type="checkbox" id="webUIReverseProxySupportCheckbox" onclick="qBittorrent.Preferences.updateWebUIReverseProxySettings();" />
                <label for="webUIReverseProxySupportCheckbox" class="qbt-translatable" data-i18n="Enable reverse proxy support">Enable reverse proxy support</label>
            </legend>
            <div class="formRow">
                <label for="webUIReverseProxiesListTextarea" class="qbt-translatable" data-i18n="Trusted proxies list:">Trusted proxies list:</label>
                <input type="text" id="webUIReverseProxiesListTextarea" class="qbt-translatable" data-i18n="[title]Specify reverse proxy IPs (or subnets, e.g. 0.0.0.0/24) in order to use forwarded client address (X-Forwarded-For header). Use ';' to split multiple entries." title="Specify reverse proxy IPs (or subnets, e.g. 0.0.0.0/24) in order to use forwarded client address (X-Forwarded-For header). Use ';' to split multiple entries." />
            </div>
        </fieldset>

    </fieldset>

    <fieldset class="settings">
        <legend>
            <input type="checkbox" id="use_dyndns_checkbox" onclick="qBittorrent.Preferences.updateDynDnsSettings();" />
            <label for="use_dyndns_checkbox" class="qbt-translatable" data-i18n="Update my dynamic domain name">Update my dynamic domain name</label>
        </legend>
        <select id="dyndns_select">
            <option value="0">DynDNS</option>
            <option value="1">NO-IP</option>
        </select>
        <input type="button" class="qbt-translatable" data-i18n="[value]Register" value="Register" onclick="qBittorrent.Preferences.registerDynDns();" />
        <table style="margin-top: 10px;">
            <tr>
                <td>
                    <label for="dyndns_domain_text" class="qbt-translatable" data-i18n="Domain name:">Domain name:</label>
                </td>
                <td>
                    <input type="text" id="dyndns_domain_text" />
                </td>
            </tr>
            <tr>
                <td>
                    <label for="dyndns_username_text" class="qbt-translatable" data-i18n="Username:">Username:</label>
                </td>
                <td>
                    <input type="text" id="dyndns_username_text" />
                </td>
            </tr>
            <tr>
                <td>
                    <label for="dyndns_password_text" class="qbt-translatable" data-i18n="Password:">Password:</label>
                </td>
                <td>
                    <input type="password" id="dyndns_password_text" />
                </td>
            </tr>
        </table>
    </fieldset>
</div>

<div id="AdvancedTab" class="PrefTab invisible">
    <fieldset class="settings">
        <legend class="qbt-translatable" data-i18n="qBittorrent Section">qBittorrent Section&nbsp;(<a href="https://github.com/qbittorrent/qBittorrent/wiki/Explanation-of-Options-in-qBittorrent#Advanced" target="_blank" class="qbt-translatable" data-i18n="Open documentation">Open documentation</a>)</legend>
        <table>
            <tr>
                <td>
                    <label for="resumeDataStorageType" class="qbt-translatable" data-i18n="Resume data storage type (requires restart):">Resume data storage type (requires restart):</label>
                </td>
                <td>
                    <select id="resumeDataStorageType" style="width: 15em;">
                        <option value="Legacy" class="qbt-translatable" data-i18n="Fastresume files">Fastresume files</option>
                        <option value="SQLite" class="qbt-translatable" data-i18n="SQLite database (experimental)">SQLite database (experimental)</option>
                    </select>
                </td>
            </tr>
            <tr id="rowMemoryWorkingSetLimit">
                <td>
                    <label for="memoryWorkingSetLimit" class="qbt-translatable" data-i18n="Physical memory (RAM) usage limit:">Physical memory (RAM) usage limit:&nbsp;<a href="https://wikipedia.org/wiki/Working_set" target="_blank">(?)</a></label>
                </td>
                <td>
                    <input type="text" id="memoryWorkingSetLimit" style="width: 15em;" class="qbt-translatable" data-i18n="[title]This option is less effective on Linux" title="This option is less effective on Linux">&nbsp;&nbsp;QBT_TR(MiB)QBT_TR[CONTEXT=OptionsDialog]
                </td>
            </tr>
            <tr>
                <td>
                    <label for="networkInterface" class="qbt-translatable" data-i18n="Network interface:">Network interface:</label>
                </td>
                <td>
                    <select id="networkInterface" style="width: 15em;">
                    </select>
                </td>
            </tr>
            <tr>
                <td>
                    <label for="optionalIPAddressToBind" class="qbt-translatable" data-i18n="Optional IP address to bind to:">Optional IP address to bind to:</label>
                </td>
                <td>
                    <select id="optionalIPAddressToBind" style="width: 15em;">
                    </select>
                </td>
            </tr>
            <tr>
                <td>
                    <label for="saveResumeDataInterval" class="qbt-translatable" data-i18n="Save resume data interval:">Save resume data interval:</label>
                </td>
                <td>
                    <input type="text" id="saveResumeDataInterval" style="width: 15em;">&nbsp;&nbsp;QBT_TR(min)QBT_TR[CONTEXT=OptionsDialog]
                </td>
            </tr>
            <tr>
                <td>
                    <label for="torrentFileSizeLimit" class="qbt-translatable" data-i18n=".torrent file size limit:">.torrent file size limit:</label>
                </td>
                <td>
                    <input type="text" id="torrentFileSizeLimit" style="width: 15em;">&nbsp;&nbsp;QBT_TR(MiB)QBT_TR[CONTEXT=OptionsDialog]
                </td>
            </tr>
            <tr>
                <td>
                    <label for="recheckTorrentsOnCompletion" class="qbt-translatable" data-i18n="Recheck torrents on completion:">Recheck torrents on completion:</label>
                </td>
                <td>
                    <input type="checkbox" id="recheckTorrentsOnCompletion">
                </td>
            </tr>
            <tr>
                <td>
                    <label for="appInstanceName" class="qbt-translatable" data-i18n="Customize application instance name:">Customize application instance name:</label>
                </td>
                <td>
                    <input type="text" id="appInstanceName" style="width: 15em;" class="qbt-translatable" data-i18n="[title]It appends the text to the window title to help distinguish qBittorent instances" title="It appends the text to the window title to help distinguish qBittorent instances" />
                </td>
            </tr>
            <tr>
                <td>
                    <label for="refreshInterval" class="qbt-translatable" data-i18n="Refresh interval:">Refresh interval:</label>
                </td>
                <td>
                    <input type="text" id="refreshInterval" style="width: 15em;" class="qbt-translatable" data-i18n="[title]It controls the internal state update interval which in turn will affect UI updates" title="It controls the internal state update interval which in turn will affect UI updates">&nbsp;&nbsp;QBT_TR(ms)QBT_TR[CONTEXT=OptionsDialog]
                </td>
            </tr>
            <tr>
                <td>
                    <label for="resolvePeerCountries" class="qbt-translatable" data-i18n="Resolve peer countries:">Resolve peer countries:</label>
                </td>
                <td>
                    <input type="checkbox" id="resolvePeerCountries">
                </td>
            </tr>
            <tr>
                <td>
                    <label for="reannounceWhenAddressChanged" class="qbt-translatable" data-i18n="Reannounce to all trackers when IP or port changed:">Reannounce to all trackers when IP or port changed:</label>
                </td>
                <td>
                    <input type="checkbox" id="reannounceWhenAddressChanged" />
                </td>
            </tr>
            <tr>
                <td>
                    <label for="enableEmbeddedTracker" class="qbt-translatable" data-i18n="Enable embedded tracker:">Enable embedded tracker:</label>
                </td>
                <td>
                    <input type="checkbox" id="enableEmbeddedTracker" />
                </td>
            </tr>
            <tr>
                <td>
                    <label for="embeddedTrackerPort" class="qbt-translatable" data-i18n="Embedded tracker port:">Embedded tracker port:</label>
                </td>
                <td>
                    <input type="text" id="embeddedTrackerPort" style="width: 15em;" />
                </td>
            </tr>
            <tr>
                <td>
                    <label for="embeddedTrackerPortForwarding" class="qbt-translatable" data-i18n="Enable port forwarding for embedded tracker:">Enable port forwarding for embedded tracker:</label>
                </td>
                <td>
                    <input type="checkbox" id="embeddedTrackerPortForwarding" />
                </td>
            </tr>
            <tr id="rowMarkOfTheWeb">
                <td>
                    <label for="markOfTheWeb" class="qbt-translatable" data-i18n="Enable Mark-of-the-Web (MOTW) for downloaded files (require macOS or Windows):">Enable Mark-of-the-Web (MOTW) for downloaded files (require macOS or Windows):</label>
                </td>
                <td>
                    <input type="checkbox" id="markOfTheWeb" />
                </td>
            </tr>
            <tr>
                <td>
                    <label for="pythonExecutablePath" class="qbt-translatable" data-i18n="Python executable path (may require restart):">Python executable path (may require restart):</label>
                </td>
                <td>
                    <input type="text" id="pythonExecutablePath" class="qbt-translatable" data-i18n="[placeholder](Auto detect if empty)" placeholder="(Auto detect if empty)" style="width: 15em;" />
                </td>
            </tr>
        </table>
    </fieldset>
    <fieldset class="settings">
        <legend class="qbt-translatable" data-i18n="libtorrent Section">libtorrent Section&nbsp;(<a href="https://www.libtorrent.org/reference-Settings.html" target="_blank" class="qbt-translatable" data-i18n="Open documentation">Open documentation</a>)</legend>
        <table>
            <tr>
                <td>
                    <label for="bdecodeDepthLimit" class="qbt-translatable" data-i18n="Bdecode depth limit:">Bdecode depth limit:&nbsp;<a href="https://www.libtorrent.org/reference-Bdecoding.html#bdecode()" target="_blank">(?)</a></label>
                </td>
                <td>
                    <input type="text" id="bdecodeDepthLimit" style="width: 15em;" />
                </td>
            </tr>
            <tr>
                <td>
                    <label for="bdecodeTokenLimit" class="qbt-translatable" data-i18n="Bdecode token limit:">Bdecode token limit:&nbsp;<a href="https://www.libtorrent.org/reference-Bdecoding.html#bdecode()" target="_blank">(?)</a></label>
                </td>
                <td>
                    <input type="text" id="bdecodeTokenLimit" style="width: 15em;" />
                </td>
            </tr>
            <tr>
                <td>
                    <label for="asyncIOThreads" class="qbt-translatable" data-i18n="Asynchronous I/O threads:">Asynchronous I/O threads:&nbsp;<a href="https://www.libtorrent.org/reference-Settings.html#aio_threads" target="_blank">(?)</a></label>
                </td>
                <td>
                    <input type="text" id="asyncIOThreads" style="width: 15em;" />
                </td>
            </tr>
            <tr id="rowHashingThreads">
                <td>
                    <label for="hashingThreads" class="qbt-translatable" data-i18n="Hashing threads:">Hashing threads:&nbsp;<a href="https://www.libtorrent.org/reference-Settings.html#hashing_threads" target="_blank">(?)</a></label>
                </td>
                <td>
                    <input type="text" id="hashingThreads" style="width: 15em;" />
                </td>
            </tr>
            <tr>
                <td>
                    <label for="filePoolSize" class="qbt-translatable" data-i18n="File pool size:">File pool size:&nbsp;<a href="https://www.libtorrent.org/reference-Settings.html#file_pool_size" target="_blank">(?)</a></label>
                </td>
                <td>
                    <input type="text" id="filePoolSize" style="width: 15em;" />
                </td>
            </tr>
            <tr>
                <td>
                    <label for="outstandMemoryWhenCheckingTorrents" class="qbt-translatable" data-i18n="Outstanding memory when checking torrents:">Outstanding memory when checking torrents:&nbsp;<a href="https://www.libtorrent.org/reference-Settings.html#checking_mem_usage" target="_blank">(?)</a></label>
                </td>
                <td>
                    <input type="text" id="outstandMemoryWhenCheckingTorrents" style="width: 15em;" />&nbsp;&nbsp;QBT_TR(MiB)QBT_TR[CONTEXT=OptionsDialog]
                </td>
            </tr>
            <tr id="rowDiskCache">
                <td>
                    <label for="diskCache" class="qbt-translatable" data-i18n="Disk cache:">Disk cache:&nbsp;<a href="https://www.libtorrent.org/reference-Settings.html#cache_size" target="_blank">(?)</a></label>
                </td>
                <td>
                    <input type="text" id="diskCache" style="width: 15em;" />&nbsp;&nbsp;QBT_TR(MiB)QBT_TR[CONTEXT=OptionsDialog]
                </td>
            </tr>
            <tr id="rowDiskCacheExpiryInterval">
                <td>
                    <label for="diskCacheExpiryInterval" class="qbt-translatable" data-i18n="Disk cache expiry interval:">Disk cache expiry interval:&nbsp;<a href="https://www.libtorrent.org/reference-Settings.html#cache_expiry" target="_blank">(?)</a></label>
                </td>
                <td>
                    <input type="text" id="diskCacheExpiryInterval" style="width: 15em;">&nbsp;&nbsp;QBT_TR(s)QBT_TR[CONTEXT=OptionsDialog]
                </td>
            </tr>
            <tr>
                <td>
                    <label for="diskQueueSize" class="qbt-translatable" data-i18n="Disk queue size:">Disk queue size:&nbsp;<a href="https://www.libtorrent.org/reference-Settings.html#max_queued_disk_bytes" target="_blank">(?)</a></label>
                </td>
                <td>
                    <input type="text" id="diskQueueSize" style="width: 15em;">&nbsp;&nbsp;QBT_TR(KiB)QBT_TR[CONTEXT=OptionsDialog]
                </td>
            </tr>
            <tr id="rowDiskIOType">
                <td>
                    <label for="diskIOType" class="qbt-translatable" data-i18n="Disk IO type (requires restart):">Disk IO type (requires restart):&nbsp;<a href="https://www.libtorrent.org/single-page-ref.html#default-disk-io-constructor" target="_blank">(?)</a></label>
                </td>
                <td>
                    <select id="diskIOType" style="width: 15em;">
                        <option value="0" class="qbt-translatable" data-i18n="Default">Default</option>
                        <option value="1" class="qbt-translatable" data-i18n="Memory mapped files">Memory mapped files</option>
                        <option value="2" class="qbt-translatable" data-i18n="POSIX-compliant">POSIX-compliant</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>
                    <label for="diskIOReadMode" class="qbt-translatable" data-i18n="Disk IO read mode:">Disk IO read mode:&nbsp;<a href="https://www.libtorrent.org/reference-Settings.html#disk_io_read_mode" target="_blank">(?)</a></label>
                </td>
                <td>
                    <select id="diskIOReadMode" style="width: 15em;">
                        <option value="0" class="qbt-translatable" data-i18n="Disable OS cache">Disable OS cache</option>
                        <option value="1" class="qbt-translatable" data-i18n="Enable OS cache">Enable OS cache</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>
                    <label for="diskIOWriteMode" class="qbt-translatable" data-i18n="Disk IO write mode:">Disk IO write mode:&nbsp;<a href="https://www.libtorrent.org/reference-Settings.html#disk_io_write_mode" target="_blank">(?)</a></label>
                </td>
                <td>
                    <select id="diskIOWriteMode" style="width: 15em;">
                        <option value="0" class="qbt-translatable" data-i18n="Disable OS cache">Disable OS cache</option>
                        <option value="1" class="qbt-translatable" data-i18n="Enable OS cache">Enable OS cache</option>
                        <option value="2" id="diskIOWriteModeWriteThrough" class="qbt-translatable" data-i18n="Write-through">Write-through</option>
                    </select>
                </td>
            </tr>
            <tr id="rowCoalesceReadsAndWrites">
                <td>
                    <label for="coalesceReadsAndWrites" class="qbt-translatable" data-i18n="Coalesce reads &amp; writes:">Coalesce reads &amp; writes:&nbsp;<a href="https://www.libtorrent.org/reference-Settings.html#coalesce_reads" target="_blank">(?)</a></label>
                </td>
                <td>
                    <input type="checkbox" id="coalesceReadsAndWrites" />
                </td>
            </tr>
            <tr>
                <td>
                    <label for="pieceExtentAffinity" class="qbt-translatable" data-i18n="Use piece extent affinity:">Use piece extent affinity:&nbsp;<a href="https://libtorrent.org/single-page-ref.html#piece_extent_affinity" target="_blank">(?)</a></label>
                </td>
                <td>
                    <input type="checkbox" id="pieceExtentAffinity" />
                </td>
            </tr>
            <tr>
                <td>
                    <label for="sendUploadPieceSuggestions" class="qbt-translatable" data-i18n="Send upload piece suggestions:">Send upload piece suggestions:&nbsp;<a href="https://www.libtorrent.org/reference-Settings.html#suggest_mode" target="_blank">(?)</a></label>
                </td>
                <td>
                    <input type="checkbox" id="sendUploadPieceSuggestions" />
                </td>
            </tr>
            <tr>
                <td>
                    <label for="sendBufferWatermark" class="qbt-translatable" data-i18n="Send buffer watermark:">Send buffer watermark:&nbsp;<a href="https://www.libtorrent.org/reference-Settings.html#send_buffer_watermark" target="_blank">(?)</a></label>
                </td>
                <td>
                    <input type="text" id="sendBufferWatermark" style="width: 15em;" />&nbsp;&nbsp;QBT_TR(KiB)QBT_TR[CONTEXT=OptionsDialog]
                </td>
            </tr>
            <tr>
                <td>
                    <label for="sendBufferLowWatermark" class="qbt-translatable" data-i18n="Send buffer low watermark:">Send buffer low watermark:&nbsp;<a href="https://www.libtorrent.org/reference-Settings.html#send_buffer_low_watermark" target="_blank">(?)</a></label>
                </td>
                <td>
                    <input type="text" id="sendBufferLowWatermark" style="width: 15em;" />&nbsp;&nbsp;QBT_TR(KiB)QBT_TR[CONTEXT=OptionsDialog]
                </td>
            </tr>
            <tr>
                <td>
                    <label for="sendBufferWatermarkFactor" class="qbt-translatable" data-i18n="Send buffer watermark factor:">Send buffer watermark factor:&nbsp;<a href="https://www.libtorrent.org/reference-Settings.html#send_buffer_watermark_factor" target="_blank">(?)</a></label>
                </td>
                <td>
                    <input type="text" id="sendBufferWatermarkFactor" style="width: 15em;" />&nbsp;&nbsp;%
                </td>
            </tr>
            <tr>
                <td>
                    <label for="connectionSpeed" class="qbt-translatable" data-i18n="Outgoing connections per second:">Outgoing connections per second:&nbsp;<a href="https://www.libtorrent.org/reference-Settings.html#connection_speed" target="_blank">(?)</a></label>
                </td>
                <td>
                    <input type="text" id="connectionSpeed" style="width: 15em;" />
                </td>
            </tr>
            <tr>
                <td>
                    <label for="socketSendBufferSize" class="qbt-translatable" data-i18n="Socket send buffer size [0: system default]:">Socket send buffer size [0: system default]:&nbsp;<a href="https://www.libtorrent.org/reference-Settings.html#send_socket_buffer_size" target="_blank">(?)</a></label>
                </td>
                <td>
                    <input type="text" id="socketSendBufferSize" style="width: 15em;" />&nbsp;&nbsp;QBT_TR(KiB)QBT_TR[CONTEXT=OptionsDialog]
                </td>
            </tr>
            <tr>
                <td>
                    <label for="socketReceiveBufferSize" class="qbt-translatable" data-i18n="Socket receive buffer size [0: system default]:">Socket receive buffer size [0: system default]:&nbsp;<a href="https://www.libtorrent.org/reference-Settings.html#recv_socket_buffer_size" target="_blank">(?)</a></label>
                </td>
                <td>
                    <input type="text" id="socketReceiveBufferSize" style="width: 15em;" />&nbsp;&nbsp;QBT_TR(KiB)QBT_TR[CONTEXT=OptionsDialog]
                </td>
            </tr>
            <tr>
                <td>
                    <label for="socketBacklogSize" class="qbt-translatable" data-i18n="Socket backlog size:">Socket backlog size:&nbsp;<a href="https://www.libtorrent.org/reference-Settings.html#listen_queue_size" target="_blank">(?)</a></label>
                </td>
                <td>
                    <input type="text" id="socketBacklogSize" style="width: 15em;" />
                </td>
            </tr>
            <tr>
                <td>
                    <label for="outgoingPortsMin" class="qbt-translatable" data-i18n="Outgoing ports (Min) [0: disabled]:">Outgoing ports (Min) [0: disabled]:&nbsp;<a href="https://www.libtorrent.org/reference-Settings.html#outgoing_port" target="_blank">(?)</a></label>
                </td>
                <td>
                    <input type="text" id="outgoingPortsMin" style="width: 15em;" />
                </td>
            </tr>
            <tr>
                <td>
                    <label for="outgoingPortsMax" class="qbt-translatable" data-i18n="Outgoing ports (Max) [0: disabled]:">Outgoing ports (Max) [0: disabled]:&nbsp;<a href="https://www.libtorrent.org/reference-Settings.html#outgoing_port" target="_blank">(?)</a></label>
                </td>
                <td>
                    <input type="text" id="outgoingPortsMax" style="width: 15em;" />
                </td>
            </tr>
            <tr>
                <td>
                    <label for="UPnPLeaseDuration" class="qbt-translatable" data-i18n="UPnP lease duration [0: permanent lease]:">UPnP lease duration [0: permanent lease]:&nbsp;<a href="https://www.libtorrent.org/reference-Settings.html#upnp_lease_duration" target="_blank">(?)</a></label>
                </td>
                <td>
                    <input type="text" id="UPnPLeaseDuration" style="width: 15em;" />
                </td>
            </tr>
            <tr>
                <td>
                    <label for="peerToS" class="qbt-translatable" data-i18n="Type of service (ToS) for connections to peers">Type of service (ToS) for connections to peers&nbsp;<a href="https://www.libtorrent.org/reference-Settings.html#peer_tos" target="_blank">(?)</a></label>
                </td>
                <td>
                    <input type="text" id="peerToS" style="width: 15em;" />
                </td>
            </tr>
            <tr>
                <td>
                    <label for="utpTCPMixedModeAlgorithm" class="qbt-translatable" data-i18n="μTP-TCP mixed mode algorithm:">μTP-TCP mixed mode algorithm:&nbsp;<a href="https://www.libtorrent.org/reference-Settings.html#mixed_mode_algorithm" target="_blank">(?)</a></label>
                </td>
                <td>
                    <select id="utpTCPMixedModeAlgorithm" style="width: 15em;">
                        <option value="0" class="qbt-translatable" data-i18n="Prefer TCP">Prefer TCP</option>
                        <option value="1" class="qbt-translatable" data-i18n="Peer proportional (throttles TCP)">Peer proportional (throttles TCP)</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>
                    <label for="IDNSupportCheckbox" class="qbt-translatable" data-i18n="Support internationalized domain name (IDN):">Support internationalized domain name (IDN):&nbsp;<a href="https://www.libtorrent.org/reference-Settings.html#allow_idna" target="_blank">(?)</a></label>
                </td>
                <td>
                    <input type="checkbox" id="IDNSupportCheckbox" />
                </td>
            </tr>
            <tr>
                <td>
                    <label for="allowMultipleConnectionsFromTheSameIPAddress" class="qbt-translatable" data-i18n="Allow multiple connections from the same IP address:">Allow multiple connections from the same IP address:&nbsp;<a href="https://www.libtorrent.org/reference-Settings.html#allow_multiple_connections_per_ip" target="_blank">(?)</a></label>
                </td>
                <td>
                    <input type="checkbox" id="allowMultipleConnectionsFromTheSameIPAddress" />
                </td>
            </tr>
            <tr>
                <td>
                    <label for="validateHTTPSTrackerCertificate" class="qbt-translatable" data-i18n="Validate HTTPS tracker certificate:">Validate HTTPS tracker certificate:&nbsp;<a href="https://www.libtorrent.org/reference-Settings.html#validate_https_trackers" target="_blank">(?)</a></label>
                </td>
                <td>
                    <input type="checkbox" id="validateHTTPSTrackerCertificate" />
                </td>
            </tr>
            <tr>
                <td>
                    <label for="mitigateSSRF" class="qbt-translatable" data-i18n="Server-side request forgery (SSRF) mitigation:">Server-side request forgery (SSRF) mitigation:&nbsp;<a href="https://www.libtorrent.org/reference-Settings.html#ssrf_mitigation" target="_blank">(?)</a></label>
                </td>
                <td>
                    <input type="checkbox" id="mitigateSSRF" />
                </td>
            </tr>
            <tr>
                <td>
                    <label for="blockPeersOnPrivilegedPorts" class="qbt-translatable" data-i18n="Disallow connection to peers on privileged ports:">Disallow connection to peers on privileged ports:&nbsp;<a href="https://libtorrent.org/single-page-ref.html#no_connect_privileged_ports" target="_blank">(?)</a></label>
                </td>
                <td>
                    <input type="checkbox" id="blockPeersOnPrivilegedPorts" />
                </td>
            </tr>
            <tr>
                <td>
                    <label for="uploadSlotsBehavior" class="qbt-translatable" data-i18n="Upload slots behavior:">Upload slots behavior:&nbsp;<a href="https://www.libtorrent.org/reference-Settings.html#choking_algorithm" target="_blank">(?)</a></label>
                </td>
                <td>
                    <select id="uploadSlotsBehavior" style="width: 15em;">
                        <option value="0" class="qbt-translatable" data-i18n="Fixed slots">Fixed slots</option>
                        <option value="1" class="qbt-translatable" data-i18n="Upload rate based">Upload rate based</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>
                    <label for="uploadChokingAlgorithm" class="qbt-translatable" data-i18n="Upload choking algorithm:">Upload choking algorithm:&nbsp;<a href="https://www.libtorrent.org/reference-Settings.html#seed_choking_algorithm" target="_blank">(?)</a></label>
                </td>
                <td>
                    <select id="uploadChokingAlgorithm" style="width: 15em;">
                        <option value="0" class="qbt-translatable" data-i18n="Round-robin">Round-robin</option>
                        <option value="1" class="qbt-translatable" data-i18n="Fastest upload">Fastest upload</option>
                        <option value="2" class="qbt-translatable" data-i18n="Anti-leech">Anti-leech</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>
                    <label for="announceAllTrackers" class="qbt-translatable" data-i18n="Always announce to all trackers in a tier:">Always announce to all trackers in a tier:&nbsp;<a href="https://www.libtorrent.org/reference-Settings.html#announce_to_all_trackers" target="_blank">(?)</a></label>
                </td>
                <td>
                    <input type="checkbox" id="announceAllTrackers" />
                </td>
            </tr>
            <tr>
                <td>
                    <label for="announceAllTiers" class="qbt-translatable" data-i18n="Always announce to all tiers:">Always announce to all tiers:&nbsp;<a href="https://www.libtorrent.org/reference-Settings.html#announce_to_all_tiers" target="_blank">(?)</a></label>
                </td>
                <td>
                    <input type="checkbox" id="announceAllTiers" />
                </td>
            </tr>
            <tr>
                <td>
                    <label for="announceIP" class="qbt-translatable" data-i18n="IP address reported to trackers (requires restart):">IP address reported to trackers (requires restart):&nbsp;<a href="https://www.libtorrent.org/reference-Settings.html#announce_ip" target="_blank">(?)</a></label>
                </td>
                <td>
                    <input type="text" id="announceIP" style="width: 15em;" />
                </td>
            </tr>
            <tr>
                <td>
                    <label for="maxConcurrentHTTPAnnounces" class="qbt-translatable" data-i18n="Max concurrent HTTP announces:">Max concurrent HTTP announces:&nbsp;<a href="https://www.libtorrent.org/reference-Settings.html#max_concurrent_http_announces" target="_blank">(?)</a></label>
                </td>
                <td>
                    <input type="text" id="maxConcurrentHTTPAnnounces" style="width: 15em;" />
                </td>
            </tr>
            <tr>
                <td>
                    <label for="stopTrackerTimeout" class="qbt-translatable" data-i18n="Stop tracker timeout [0: disabled]:">Stop tracker timeout [0: disabled]:&nbsp;<a href="https://www.libtorrent.org/reference-Settings.html#stop_tracker_timeout" target="_blank">(?)</a></label>
                </td>
                <td>
                    <input type="text" id="stopTrackerTimeout" style="width: 15em;" />
                </td>
            </tr>
            <tr>
                <td>
                    <label for="peerTurnover" class="qbt-translatable" data-i18n="Peer turnover disconnect percentage:">Peer turnover disconnect percentage:&nbsp;<a href="https://www.libtorrent.org/reference-Settings.html#peer_turnover" target="_blank">(?)</a></label>
                </td>
                <td>
                    <input type="text" id="peerTurnover" style="width: 15em;" />&nbsp;&nbsp;%
                </td>
            </tr>
            <tr>
                <td>
                    <label for="peerTurnoverCutoff" class="qbt-translatable" data-i18n="Peer turnover threshold percentage:">Peer turnover threshold percentage:&nbsp;<a href="https://www.libtorrent.org/reference-Settings.html#peer_turnover" target="_blank">(?)</a></label>
                </td>
                <td>
                    <input type="text" id="peerTurnoverCutoff" style="width: 15em;" />&nbsp;&nbsp;%
                </td>
            </tr>
            <tr>
                <td>
                    <label for="peerTurnoverInterval" class="qbt-translatable" data-i18n="Peer turnover disconnect interval:">Peer turnover disconnect interval:&nbsp;<a href="https://www.libtorrent.org/reference-Settings.html#peer_turnover" target="_blank">(?)</a></label>
                </td>
                <td>
                    <input type="text" id="peerTurnoverInterval" style="width: 15em;" />&nbsp;&nbsp;s
                </td>
            </tr>
            <tr>
                <td>
                    <label for="requestQueueSize" class="qbt-translatable" data-i18n="Maximum outstanding requests to a single peer:">Maximum outstanding requests to a single peer:&nbsp;<a href="https://www.libtorrent.org/reference-Settings.html#max_out_request_queue" target="_blank">(?)</a></label>
                </td>
                <td>
                    <input type="text" id="requestQueueSize" style="width: 15em;" />
                </td>
            </tr>
            <tr>
                <td>
                    <label for="dhtBootstrapNodes" class="qbt-translatable" data-i18n="DHT bootstrap nodes:">DHT bootstrap nodes:&nbsp;<a href="https://www.libtorrent.org/reference-Settings.html#dht_bootstrap_nodes" target="_blank">(?)</a></label>
                </td>
                <td>
                    <input type="text" id="dhtBootstrapNodes" class="qbt-translatable" data-i18n="[placeholder]Resets to default if empty" placeholder="Resets to default if empty" style="width: 15em;" />
                </td>
            </tr>
            <tr id="rowI2pInboundQuantity">
                <td>
                    <label for="i2pInboundQuantity" class="qbt-translatable" data-i18n="I2P inbound quantity:">I2P inbound quantity:&nbsp;<a href="https://www.libtorrent.org/reference-Settings.html#i2p_inbound_quantity" target="_blank">(?)</a></label>
                </td>
                <td>
                    <input id="i2pInboundQuantity" type="number" min="1" max="16" onchange="qBittorrent.Preferences.numberInputLimiter(this);" style="width: 15em;" />
                </td>
            </tr>
            <tr id="rowI2pOutboundQuantity">
                <td>
                    <label for="i2pOutboundQuantity" class="qbt-translatable" data-i18n="I2P outbound quantity:">I2P outbound quantity:&nbsp;<a href="https://www.libtorrent.org/reference-Settings.html#i2p_outbound_quantity" target="_blank">(?)</a></label>
                </td>
                <td>
                    <input id="i2pOutboundQuantity" type="number" min="1" max="16" onchange="qBittorrent.Preferences.numberInputLimiter(this);" style="width: 15em;" />
                </td>
            </tr>
            <tr id="rowI2pInboundLength">
                <td>
                    <label for="i2pInboundLength" class="qbt-translatable" data-i18n="I2P inbound length:">I2P inbound length:&nbsp;<a href="https://www.libtorrent.org/reference-Settings.html#i2p_inbound_length" target="_blank">(?)</a></label>
                </td>
                <td>
                    <input id="i2pInboundLength" type="number" min="0" max="7" onchange="qBittorrent.Preferences.numberInputLimiter(this);" style="width: 15em;" />
                </td>
            </tr>
            <tr id="rowI2pOutboundLength">
                <td>
                    <label for="i2pOutboundLength" class="qbt-translatable" data-i18n="I2P outbound length:">I2P outbound length:&nbsp;<a href="https://www.libtorrent.org/reference-Settings.html#i2p_outbound_length" target="_blank">(?)</a></label>
                </td>
                <td>
                    <input id="i2pOutboundLength" type="number" min="0" max="7" onchange="qBittorrent.Preferences.numberInputLimiter(this);" style="width: 15em;" />
                </td>
            </tr>
        </table>
    </fieldset>
</div>

<div style="text-align: center; margin-top: 1em;"><input type="button" class="qbt-translatable" data-i18n="[value]Save" value="Save" onclick="qBittorrent.Preferences.applyPreferences();" /></div>

<script>
    'use strict';

    if (window.qBittorrent === undefined) {
        window.qBittorrent = {};
    }

    window.qBittorrent.Preferences = (function() {
        const exports = function() {
            return {
                numberInputLimiter: numberInputLimiter,
                updateFileLogEnabled: updateFileLogEnabled,
                updateFileLogBackupEnabled: updateFileLogBackupEnabled,
                updateFileLogDeleteEnabled: updateFileLogDeleteEnabled,
                updateTempDirEnabled: updateTempDirEnabled,
                updateExportDirEnabled: updateExportDirEnabled,
                updateExportDirFinEnabled: updateExportDirFinEnabled,
                addWatchFolder: addWatchFolder,
                updateExcludedFileNamesEnabled: updateExcludedFileNamesEnabled,
                changeWatchFolderSelect: changeWatchFolderSelect,
                updateMailNotification: updateMailNotification,
                updateMailAuthSettings: updateMailAuthSettings,
                sendTestEmail: sendTestEmail,
                updateAutoRun: updateAutoRun,
                updateAutoRunOnTorrentAdded: updateAutoRunOnTorrentAdded,
                generateRandomPort: generateRandomPort,
                updateMaxConnecEnabled: updateMaxConnecEnabled,
                updateMaxConnecPerTorrentEnabled: updateMaxConnecPerTorrentEnabled,
                updateMaxUploadsEnabled: updateMaxUploadsEnabled,
                updateMaxUploadsPerTorrentEnabled: updateMaxUploadsPerTorrentEnabled,
                updateI2PSettingsEnabled: updateI2PSettingsEnabled,
                updatePeerProxySettings: updatePeerProxySettings,
                updatePeerProxyAuthSettings: updatePeerProxyAuthSettings,
                updateFilterSettings: updateFilterSettings,
                updateSchedulingEnabled: updateSchedulingEnabled,
                updateQueueingSystem: updateQueueingSystem,
                updateSlowTorrentsSettings: updateSlowTorrentsSettings,
                updateMaxRatioTimeEnabled: updateMaxRatioTimeEnabled,
                updateAddTrackersEnabled: updateAddTrackersEnabled,
                updateHttpsSettings: updateHttpsSettings,
                updateBypasssAuthSettings: updateBypasssAuthSettings,
                updateAlternativeWebUISettings: updateAlternativeWebUISettings,
                updateHostHeaderValidationSettings: updateHostHeaderValidationSettings,
                updateWebUICustomHTTPHeadersSettings: updateWebUICustomHTTPHeadersSettings,
                updateWebUIReverseProxySettings: updateWebUIReverseProxySettings,
                updateDynDnsSettings: updateDynDnsSettings,
                updateWebuiLocaleSelect: updateWebuiLocaleSelect,
                registerDynDns: registerDynDns,
                applyPreferences: applyPreferences
            };
        };

        // Behavior tab
        const numberInputLimiter = (input) => {
            const min = input.getAttribute("min");
            const max = input.getAttribute("max");

            if (min && input.value.toInt() < min.toInt())
                input.value = min;

            if (max && input.value.toInt() > max.toInt())
                input.value = max;
        };

        const updateFileLogEnabled = function() {
            const isFileLogEnabled = $('filelog_checkbox').getProperty('checked');
            $('filelog_save_path_input').setProperty('disabled', !isFileLogEnabled);
            $('filelog_backup_checkbox').setProperty('disabled', !isFileLogEnabled);
            $('filelog_delete_old_checkbox').setProperty('disabled', !isFileLogEnabled);

            updateFileLogBackupEnabled();
            updateFileLogDeleteEnabled();
        };

        const updateFileLogBackupEnabled = function() {
            const pros = $('filelog_backup_checkbox').getProperties('disabled', 'checked');
            $('filelog_max_size_input').setProperty('disabled', pros.disabled || !pros.checked);
        };

        const updateFileLogDeleteEnabled = function() {
            const pros = $('filelog_delete_old_checkbox').getProperties('disabled', 'checked');
            $('filelog_age_input').setProperty('disabled', pros.disabled || !pros.checked);
            $('filelog_age_type_select').setProperty('disabled', pros.disabled || !pros.checked);
        };

        // Downloads tab
        const watchedFoldersTable = new HtmlTable($("watched_folders_tab"));

        const updateTempDirEnabled = function() {
            const isTempDirEnabled = $('temppath_checkbox').getProperty('checked');
            $('temppath_text').setProperty('disabled', !isTempDirEnabled);
        };

        const changeWatchFolderSelect = (item) => {
            if (item.value === "other") {
                item.nextElementSibling.hidden = false;
                item.nextElementSibling.value = 'QBT_TR(Type folder here)QBT_TR[CONTEXT=ScanFoldersModel]';
                item.nextElementSibling.select();
            }
            else {
                item.nextElementSibling.hidden = true;
                const text = item.options[item.selectedIndex].textContent;
                item.nextElementSibling.value = text;
            }
        };

        const addWatchFolder = (folder = "", sel = "default_folder", other = "") => {
            const pos = $('watched_folders_tab').getChildren('tbody')[0].getChildren('tr').length;
            const myinput = "<input id='text_watch_" + pos + "' type='text' value='" + folder + "'>";
            const disableInput = (sel !== "other");
            const mycb = "<div class='select-watched-folder-editable'>"
                + "<select id ='cb_watch_" + pos + "' onchange='qBittorrent.Preferences.changeWatchFolderSelect(this)'>"
                + "<option value='watch_folder' class="qbt-translatable" data-i18n="Monitored folder">Monitored folder</option>"
                + "<option value='default_folder' class="qbt-translatable" data-i18n="Default save location">Default save location</option>"
                + "<option value='other' class="qbt-translatable" data-i18n="Other...">Other...</option>"
                + "</select>"
                + "<input id='cb_watch_txt_" + pos + "' type='text' " + (disableInput ? "hidden " : "") + "/>"
                + "<img src='images/list-add.svg' id='addFolderImg_" + pos + "' alt='Add' style='padding-left:170px;width:16px;cursor:pointer;' onclick='qBittorrent.Preferences.addWatchFolder();' />"
                + "</div>";

            watchedFoldersTable.push([myinput, mycb]);
            $('cb_watch_' + pos).setProperty('value', sel);
            if (disableInput) {
                const elt = $('cb_watch_' + pos);
                other = elt.options[elt.selectedIndex].textContent;
            }
            $('cb_watch_txt_' + pos).setProperty('value', other);

            // hide previous img
            if (pos > 0)
                $('addFolderImg_' + (pos - 1)).style.display = "none";
        };

        const getWatchedFolders = () => {
            const nb_folders = $("watched_folders_tab").getChildren("tbody")[0].getChildren("tr").length;
            const folders = new Hash();
            for (let i = 0; i < nb_folders; ++i) {
                const fpath = $('text_watch_' + i).getProperty('value').trim();
                if (fpath.length > 0) {
                    const sel = $('cb_watch_' + i).getProperty('value').trim();

                    let other;
                    if (sel === "other")
                        other = $('cb_watch_txt_' + i).getProperty('value').trim();
                    else
                        other = (sel === "watch_folder") ? 0 : 1;

                    folders.set(fpath, other);
                }
            }
            return folders;
        };

        const updateExcludedFileNamesEnabled = function() {
            const isAExcludedFileNamesEnabled = $('excludedFileNamesCheckbox').getProperty('checked');
            $('excludedFileNamesTextarea').setProperty('disabled', !isAExcludedFileNamesEnabled);
        };

        const updateExportDirEnabled = function() {
            const isExportDirEnabled = $('exportdir_checkbox').getProperty('checked');
            $('exportdir_text').setProperty('disabled', !isExportDirEnabled);
        };

        const updateExportDirFinEnabled = function() {
            const isExportDirFinEnabled = $('exportdirfin_checkbox').getProperty('checked');
            $('exportdirfin_text').setProperty('disabled', !isExportDirFinEnabled);
        };

        const updateMailNotification = function() {
            const isMailNotificationEnabled = $('mail_notification_checkbox').getProperty('checked');
            $('src_email_txt').setProperty('disabled', !isMailNotificationEnabled);
            $('dest_email_txt').setProperty('disabled', !isMailNotificationEnabled);
            $('smtp_server_txt').setProperty('disabled', !isMailNotificationEnabled);
            $('mail_ssl_checkbox').setProperty('disabled', !isMailNotificationEnabled);
            $('mail_auth_checkbox').setProperty('disabled', !isMailNotificationEnabled);
            $('mail_test_button').setProperty('disabled', !isMailNotificationEnabled);

            if (!isMailNotificationEnabled) {
                $('mail_auth_checkbox').setProperty('checked', !isMailNotificationEnabled);
                updateMailAuthSettings();
            }
        };

        const updateMailAuthSettings = function() {
            const isMailAuthEnabled = $('mail_auth_checkbox').getProperty('checked');
            $('mail_username_text').setProperty('disabled', !isMailAuthEnabled);
            $('mail_password_text').setProperty('disabled', !isMailAuthEnabled);
        };

        const sendTestEmail = function() {
            new Request({
                url: 'api/v2/app/sendTestEmail',
                method: 'post',
                onFailure: function() {
                    alert("QBT_TR(Could not contact qBittorrent)QBT_TR[CONTEXT=HttpServer]");
                },
                onSuccess: function() {
                    alert("QBT_TR(Attempted to send email. Check your inbox to confirm success)QBT_TR[CONTEXT=OptionsDialog]");
                }
            }).send();
        };

        const updateAutoRunOnTorrentAdded = function() {
            const isAutoRunOnTorrentAddedEnabled = $('autorunOnTorrentAddedCheckbox').getProperty('checked');
            $('autorunOnTorrentAddedProgram').setProperty('disabled', !isAutoRunOnTorrentAddedEnabled);
        };

        const updateAutoRun = function() {
            const isAutoRunEnabled = $('autorun_checkbox').getProperty('checked');
            $('autorunProg_txt').setProperty('disabled', !isAutoRunEnabled);
        };

        // Connection tab

        const updateMaxConnecEnabled = function() {
            const isMaxConnecEnabled = $('max_connec_checkbox').getProperty('checked');
            $('max_connec_value').setProperty('disabled', !isMaxConnecEnabled);
        };

        const updateMaxConnecPerTorrentEnabled = function() {
            const isMaxConnecPerTorrentEnabled = $('max_connec_per_torrent_checkbox').getProperty('checked');
            $('max_connec_per_torrent_value').setProperty('disabled', !isMaxConnecPerTorrentEnabled);
        };

        const updateMaxUploadsEnabled = function() {
            const isMaxUploadsEnabled = $('max_uploads_checkbox').getProperty('checked');
            $('max_uploads_value').setProperty('disabled', !isMaxUploadsEnabled);
        };

        const updateMaxUploadsPerTorrentEnabled = function() {
            const isMaxUploadsPerTorrentEnabled = $('max_uploads_per_torrent_checkbox').getProperty('checked');
            $('max_uploads_per_torrent_value').setProperty('disabled', !isMaxUploadsPerTorrentEnabled);
        };

        const updateI2PSettingsEnabled = function() {
            const isI2PEnabled = $('i2pEnabledCheckbox').getProperty('checked');
            $('i2pAddress').setProperty('disabled', !isI2PEnabled);
            $('i2pPort').setProperty('disabled', !isI2PEnabled);
            $('i2pMixedMode').setProperty('disabled', !isI2PEnabled);
        };

        const updatePeerProxySettings = function() {
            const proxyType = $('peer_proxy_type_select').getProperty('value');
            const isProxyDisabled = (proxyType === "None");
            const isProxySocks4 = (proxyType === "SOCKS4");

            $('peer_proxy_host_text').setProperty('disabled', isProxyDisabled);
            $('peer_proxy_port_value').setProperty('disabled', isProxyDisabled);

            $('peer_proxy_auth_checkbox').setProperty('disabled', (isProxyDisabled || isProxySocks4));
            $('proxy_bittorrent_checkbox').setProperty('disabled', isProxyDisabled);
            $('use_peer_proxy_checkbox').setProperty('disabled', (isProxyDisabled || !$('proxy_bittorrent_checkbox').getProperty('checked')));
            $('proxyHostnameLookupCheckbox').setProperty('disabled', (isProxyDisabled || isProxySocks4));
            $('proxy_rss_checkbox').setProperty('disabled', (isProxyDisabled || isProxySocks4));
            $('proxy_misc_checkbox').setProperty('disabled', (isProxyDisabled || isProxySocks4));

            updatePeerProxyAuthSettings();
        };

        const updatePeerProxyAuthSettings = function() {
            const proxyType = $('peer_proxy_type_select').getProperty('value');
            const isProxyDisabled = (proxyType === "None");
            const isPeerProxyAuthEnabled = (!$('peer_proxy_auth_checkbox').getProperty('disabled') && $('peer_proxy_auth_checkbox').getProperty('checked'));
            $('peer_proxy_username_text').setProperty('disabled', (isProxyDisabled || !isPeerProxyAuthEnabled));
            $('peer_proxy_password_text').setProperty('disabled', (isProxyDisabled || !isPeerProxyAuthEnabled));
        };

        const updateFilterSettings = function() {
            const isIPFilterEnabled = $('ipfilter_text_checkbox').getProperty('checked');
            $('ipfilter_text').setProperty('disabled', !isIPFilterEnabled);
        };

        // Speed tab
        const updateSchedulingEnabled = function() {
            const isLimitSchedulingEnabled = $('limitSchedulingCheckbox').getProperty('checked');
            $('schedule_from_hour').setProperty('disabled', !isLimitSchedulingEnabled);
            $('schedule_from_min').setProperty('disabled', !isLimitSchedulingEnabled);
            $('schedule_to_hour').setProperty('disabled', !isLimitSchedulingEnabled);
            $('schedule_to_min').setProperty('disabled', !isLimitSchedulingEnabled);
            $('schedule_freq_select').setProperty('disabled', !isLimitSchedulingEnabled);
        };

        // Bittorrent tab
        const updateQueueingSystem = function() {
            const isQueueingEnabled = $('queueing_checkbox').getProperty('checked');
            $('max_active_dl_value').setProperty('disabled', !isQueueingEnabled);
            $('max_active_up_value').setProperty('disabled', !isQueueingEnabled);
            $('max_active_to_value').setProperty('disabled', !isQueueingEnabled);
            $('dont_count_slow_torrents_checkbox').setProperty('disabled', !isQueueingEnabled);
            updateSlowTorrentsSettings();
        };

        const updateSlowTorrentsSettings = function() {
            const isDontCountSlowTorrentsEnabled = (!$('dont_count_slow_torrents_checkbox').getProperty('disabled')) && $('dont_count_slow_torrents_checkbox').getProperty('checked');
            $('dl_rate_threshold').setProperty('disabled', !isDontCountSlowTorrentsEnabled);
            $('ul_rate_threshold').setProperty('disabled', !isDontCountSlowTorrentsEnabled);
            $('torrent_inactive_timer').setProperty('disabled', !isDontCountSlowTorrentsEnabled);
        };

        const updateMaxRatioTimeEnabled = function() {
            const isMaxRatioEnabled = $('max_ratio_checkbox').getProperty('checked');
            $('max_ratio_value').setProperty('disabled', !isMaxRatioEnabled);

            const isMaxSeedingTimeEnabled = $('max_seeding_time_checkbox').getProperty('checked');
            $('max_seeding_time_value').setProperty('disabled', !isMaxSeedingTimeEnabled);

            const isMaxInactiveSeedingTimeEnabled = $('max_inactive_seeding_time_checkbox').getProperty('checked');
            $('max_inactive_seeding_time_value').setProperty('disabled', !isMaxInactiveSeedingTimeEnabled);

            $('max_ratio_act').setProperty('disabled', !(isMaxRatioEnabled || isMaxSeedingTimeEnabled || isMaxInactiveSeedingTimeEnabled));
        };

        const updateAddTrackersEnabled = function() {
            const isAddTrackersEnabled = $('add_trackers_checkbox').getProperty('checked');
            $('add_trackers_textarea').setProperty('disabled', !isAddTrackersEnabled);
        };

        // WebUI tab
        const updateHttpsSettings = function() {
            const isUseHttpsEnabled = $('use_https_checkbox').getProperty('checked');
            $('ssl_cert_text').setProperty('disabled', !isUseHttpsEnabled);
            $('ssl_key_text').setProperty('disabled', !isUseHttpsEnabled);
            $('secureCookieCheckbox').setProperty('disabled', !isUseHttpsEnabled);
        };

        const updateBypasssAuthSettings = function() {
            const isBypassAuthSubnetWhitelistEnabled = $('bypass_auth_subnet_whitelist_checkbox').getProperty('checked');
            $('bypass_auth_subnet_whitelist_textarea').setProperty('disabled', !isBypassAuthSubnetWhitelistEnabled);
        };

        const updateAlternativeWebUISettings = function() {
            const isUseAlternativeWebUIEnabled = $('use_alt_webui_checkbox').getProperty('checked');
            $('webui_files_location_textarea').setProperty('disabled', !isUseAlternativeWebUIEnabled);
        };

        const updateHostHeaderValidationSettings = function() {
            const isHostHeaderValidationEnabled = $('host_header_validation_checkbox').getProperty('checked');
            $('webui_domain_textarea').setProperty('disabled', !isHostHeaderValidationEnabled);
        };

        const updateWebUICustomHTTPHeadersSettings = function() {
            const isEnabled = $('webUIUseCustomHTTPHeadersCheckbox').getProperty('checked');
            $('webUICustomHTTPHeadersTextarea').setProperty('disabled', !isEnabled);
        };

        const updateWebUIReverseProxySettings = function() {
            const isEnabled = $('webUIReverseProxySupportCheckbox').getProperty('checked');
            $('webUIReverseProxiesListTextarea').setProperty('disabled', !isEnabled);
        };

        const updateDynDnsSettings = function() {
            const isDynDnsEnabled = $('use_dyndns_checkbox').getProperty('checked');
            $('dyndns_select').setProperty('disabled', !isDynDnsEnabled);
            $('dyndns_domain_text').setProperty('disabled', !isDynDnsEnabled);
            $('dyndns_username_text').setProperty('disabled', !isDynDnsEnabled);
            $('dyndns_password_text').setProperty('disabled', !isDynDnsEnabled);
        };

        const registerDynDns = function() {
            if ($('dyndns_select').getProperty('value').toInt() == 1) {
                window.open("http://www.no-ip.com/services/managed_dns/free_dynamic_dns.html", "NO-IP Registration");
            }
            else {
                window.open("https://www.dyndns.com/account/services/hosts/add.html", "DynDNS Registration");
            }
        };

        const generateRandomPort = function() {
            const min = 1024;
            const max = 65535;
            const port = Math.floor(Math.random() * (max - min + 1) + min);
            $('port_value').setProperty('value', port);
        };

        const time_padding = function(val) {
            let ret = val.toString();
            if (ret.length == 1)
                ret = '0' + ret;
            return ret;
        };

        // Advanced Tab
        const updateNetworkInterfaces = function(default_iface, default_iface_name) {
            const url = 'api/v2/app/networkInterfaceList';
            $('networkInterface').getChildren().each(c => c.destroy());
            new Request.JSON({
                url: url,
                method: 'get',
                noCache: true,
                onFailure: function() {
                    alert("Could not contact qBittorrent");
                },
                onSuccess: function(ifaces) {
                    if (!Array.isArray(ifaces))
                        return;

                    // add the current network interface to the options if needed
                    if (default_iface && !ifaces.some((item) => item.value === default_iface))
                        ifaces.push({ name: default_iface_name || default_iface, value: default_iface });

                    $('networkInterface').options.add(new Option('QBT_TR(Any interface)QBT_TR[CONTEXT=OptionsDialog]', ''));
                    ifaces.forEach(function(item, index) {
                        $('networkInterface').options.add(new Option(item.name, item.value));
                    });
                    $('networkInterface').setProperty('value', default_iface);
                }
            }).send();
        };

        const updateInterfaceAddresses = function(iface, default_addr) {
            const url = 'api/v2/app/networkInterfaceAddressList';
            $('optionalIPAddressToBind').getChildren().each(c => c.destroy());
            new Request.JSON({
                url: url,
                method: 'get',
                noCache: true,
                data: {
                    'iface': iface
                },
                onFailure: function() {
                    alert("Could not contact qBittorrent");
                },
                onSuccess: function(addresses) {
                    if (!addresses)
                        return;

                    $('optionalIPAddressToBind').options.add(new Option('QBT_TR(All addresses)QBT_TR[CONTEXT=OptionDialog]', ''));
                    $('optionalIPAddressToBind').options.add(new Option('QBT_TR(All IPv4 addresses)QBT_TR[CONTEXT=OptionDialog]', '0.0.0.0'));
                    $('optionalIPAddressToBind').options.add(new Option('QBT_TR(All IPv6 addresses)QBT_TR[CONTEXT=OptionDialog]', '::'));
                    addresses.forEach(function(item, index) {
                        $('optionalIPAddressToBind').options.add(new Option(item, item));
                    });
                    $('optionalIPAddressToBind').setProperty('value', default_addr);
                }
            }).send();
        };

        const updateWebuiLocaleSelect = (selected) => {
            let languages = [];
            for (let i = 0; i < $('locale_select').options.length; i++)
                languages.push($('locale_select').options[i].value);

            if (!languages.includes(selected)) {
                const lang = selected.slice(0, selected.indexOf('_'));
                selected = languages.includes(lang) ? lang : 'en';
            }
            $('locale_select').setProperty('value', selected);
        };

        const loadPreferences = function() {
            window.parent.qBittorrent.Cache.preferences.init({
                onSuccess: (pref) => {
                    // Behavior tab
                    $('filelog_checkbox').setProperty('checked', pref.file_log_enabled);
                    $('filelog_save_path_input').setProperty('value', pref.file_log_path);
                    $('filelog_backup_checkbox').setProperty('checked', pref.file_log_backup_enabled);
                    $('filelog_max_size_input').setProperty('value', pref.file_log_max_size);
                    $('filelog_delete_old_checkbox').setProperty('checked', pref.file_log_delete_old);
                    $('filelog_age_input').setProperty('value', pref.file_log_age);
                    $('filelog_age_type_select').setProperty('value', pref.file_log_age_type);
                    updateFileLogEnabled();

                    // Downloads tab
                    // When adding a torrent
                    let index = 0;
                    switch (pref.torrent_content_layout) {
                        case "Original":
                            index = 0;
                            break;
                        case "Subfolder":
                            index = 1;
                            break;
                        case "NoSubfolder":
                            index = 2;
                            break;
                    }
                    $('contentlayout_select').getChildren('option')[index].selected = true;
                    $('addToTopOfQueueCheckbox').setProperty('checked', pref.add_to_top_of_queue);
                    $('dontstartdownloads_checkbox').setProperty('checked', pref.start_paused_enabled);
                    switch (pref.torrent_stop_condition) {
                        case "None":
                            index = 0;
                            break;
                        case "MetadataReceived":
                            index = 1;
                            break;
                        case "FilesChecked":
                            index = 2;
                            break;
                    }
                    $('stopConditionSelect').getChildren('option')[index].selected = true;
                    $('deletetorrentfileafter_checkbox').setProperty('checked', pref.auto_delete_mode);

                    $('preallocateall_checkbox').setProperty('checked', pref.preallocate_all);
                    $('appendext_checkbox').setProperty('checked', pref.incomplete_files_ext);
                    $('unwantedfolder_checkbox').setProperty('checked', pref.use_unwanted_folder);

                    // Saving Management
                    $('default_tmm_combobox').setProperty('value', pref.auto_tmm_enabled);
                    $('torrent_changed_tmm_combobox').setProperty('value', pref.torrent_changed_tmm_enabled);
                    $('save_path_changed_tmm_combobox').setProperty('value', pref.save_path_changed_tmm_enabled);
                    $('category_changed_tmm_combobox').setProperty('value', pref.category_changed_tmm_enabled);
                    $('use_subcategories_checkbox').setProperty('checked', pref.use_subcategories);
                    $('savepath_text').setProperty('value', pref.save_path);
                    $('temppath_checkbox').setProperty('checked', pref.temp_path_enabled);
                    $('temppath_text').setProperty('value', pref.temp_path);
                    updateTempDirEnabled();
                    if (pref.export_dir != '') {
                        $('exportdir_checkbox').setProperty('checked', true);
                        $('exportdir_text').setProperty('value', pref.export_dir);
                    }
                    else {
                        $('exportdir_checkbox').setProperty('checked', false);
                        $('exportdir_text').setProperty('value', '');
                    }
                    updateExportDirEnabled();
                    if (pref.export_dir_fin != '') {
                        $('exportdirfin_checkbox').setProperty('checked', true);
                        $('exportdirfin_text').setProperty('value', pref.export_dir_fin);
                    }
                    else {
                        $('exportdirfin_checkbox').setProperty('checked', false);
                        $('exportdirfin_text').setProperty('value', '');
                    }
                    updateExportDirFinEnabled();

                    // Automatically add torrents from
                    for (const folder in pref.scan_dirs) {
                        if (!Object.hasOwn(pref.scan_dirs, folder))
                            continue;

                        const folderType = pref.scan_dirs[folder];
                        let sel = "";
                        let other = "";
                        if (typeof folderType === "number") {
                            sel = (folderType === 0) ? "watch_folder" : "default_folder";
                        }
                        else {
                            sel = "other";
                            other = folderType;
                        }
                        addWatchFolder(folder, sel, other);
                    }
                    addWatchFolder();

                    // Excluded file names
                    $('excludedFileNamesCheckbox').setProperty('checked', pref.excluded_file_names_enabled);
                    $('excludedFileNamesTextarea').setProperty('value', pref.excluded_file_names);

                    // Email notification upon download completion
                    $('mail_notification_checkbox').setProperty('checked', pref.mail_notification_enabled);
                    $('src_email_txt').setProperty('value', pref.mail_notification_sender);
                    $('dest_email_txt').setProperty('value', pref.mail_notification_email);
                    $('smtp_server_txt').setProperty('value', pref.mail_notification_smtp);
                    $('mail_ssl_checkbox').setProperty('checked', pref.mail_notification_ssl_enabled);
                    $('mail_auth_checkbox').setProperty('checked', pref.mail_notification_auth_enabled);
                    $('mail_username_text').setProperty('value', pref.mail_notification_username);
                    $('mail_password_text').setProperty('value', pref.mail_notification_password);
                    updateMailNotification();
                    updateMailAuthSettings();

                    // Run an external program on torrent added
                    $('autorunOnTorrentAddedCheckbox').setProperty('checked', pref.autorun_on_torrent_added_enabled);
                    $('autorunOnTorrentAddedProgram').setProperty('value', pref.autorun_on_torrent_added_program);
                    updateAutoRunOnTorrentAdded();
                    // Run an external program on torrent finished
                    $('autorun_checkbox').setProperty('checked', pref.autorun_enabled);
                    $('autorunProg_txt').setProperty('value', pref.autorun_program);
                    updateAutoRun();

                    // Connection tab
                    // Listening Port
                    $('port_value').setProperty('value', pref.listen_port.toInt());
                    $('upnp_checkbox').setProperty('checked', pref.upnp);

                    // Connections Limits
                    const max_connec = pref.max_connec.toInt();
                    if (max_connec <= 0) {
                        $('max_connec_checkbox').setProperty('checked', false);
                        $('max_connec_value').setProperty('value', 500);
                    }
                    else {
                        $('max_connec_checkbox').setProperty('checked', true);
                        $('max_connec_value').setProperty('value', max_connec);
                    }
                    updateMaxConnecEnabled();
                    const max_connec_per_torrent = pref.max_connec_per_torrent.toInt();
                    if (max_connec_per_torrent <= 0) {
                        $('max_connec_per_torrent_checkbox').setProperty('checked', false);
                        $('max_connec_per_torrent_value').setProperty('value', 100);
                    }
                    else {
                        $('max_connec_per_torrent_checkbox').setProperty('checked', true);
                        $('max_connec_per_torrent_value').setProperty('value', max_connec_per_torrent);
                    }
                    updateMaxConnecPerTorrentEnabled();
                    const max_uploads = pref.max_uploads.toInt();
                    if (max_uploads <= 0) {
                        $('max_uploads_checkbox').setProperty('checked', false);
                        $('max_uploads_value').setProperty('value', 8);
                    }
                    else {
                        $('max_uploads_checkbox').setProperty('checked', true);
                        $('max_uploads_value').setProperty('value', max_uploads);
                    }
                    updateMaxUploadsEnabled();
                    const max_uploads_per_torrent = pref.max_uploads_per_torrent.toInt();
                    if (max_uploads_per_torrent <= 0) {
                        $('max_uploads_per_torrent_checkbox').setProperty('checked', false);
                        $('max_uploads_per_torrent_value').setProperty('value', 4);
                    }
                    else {
                        $('max_uploads_per_torrent_checkbox').setProperty('checked', true);
                        $('max_uploads_per_torrent_value').setProperty('value', max_uploads_per_torrent);
                    }
                    updateMaxUploadsPerTorrentEnabled();

                    // I2P
                    $('i2pEnabledCheckbox').setProperty('checked', pref.i2p_enabled);
                    $('i2pAddress').setProperty('value', pref.i2p_address);
                    $('i2pPort').setProperty('value', pref.i2p_port);
                    $('i2pMixedMode').setProperty('checked', pref.i2p_mixed_mode);
                    updateI2PSettingsEnabled();

                    // Proxy Server
                    $('peer_proxy_type_select').setProperty('value', pref.proxy_type);
                    $('peer_proxy_host_text').setProperty('value', pref.proxy_ip);
                    $('peer_proxy_port_value').setProperty('value', pref.proxy_port);
                    $('peer_proxy_auth_checkbox').setProperty('checked', pref.proxy_auth_enabled);
                    $('peer_proxy_username_text').setProperty('value', pref.proxy_username);
                    $('peer_proxy_password_text').setProperty('value', pref.proxy_password);
                    $('proxyHostnameLookupCheckbox').setProperty('checked', pref.proxy_hostname_lookup);
                    $('proxy_bittorrent_checkbox').setProperty('checked', pref.proxy_bittorrent);
                    $('use_peer_proxy_checkbox').setProperty('checked', pref.proxy_peer_connections);
                    $('proxy_rss_checkbox').setProperty('checked', pref.proxy_rss);
                    $('proxy_misc_checkbox').setProperty('checked', pref.proxy_misc);
                    updatePeerProxySettings();

                    // IP Filtering
                    $('ipfilter_text_checkbox').setProperty('checked', pref.ip_filter_enabled);
                    $('ipfilter_text').setProperty('value', pref.ip_filter_path);
                    $('ipfilter_trackers_checkbox').setProperty('checked', pref.ip_filter_trackers);
                    $('banned_IPs_textarea').setProperty('value', pref.banned_IPs);
                    updateFilterSettings();

                    // Speed tab
                    // Global Rate Limits
                    $('up_limit_value').setProperty('value', (pref.up_limit.toInt() / 1024));
                    $('dl_limit_value').setProperty('value', (pref.dl_limit.toInt() / 1024));
                    // Alternative Global Rate Limits
                    $('alt_up_limit_value').setProperty('value', (pref.alt_up_limit.toInt() / 1024));
                    $('alt_dl_limit_value').setProperty('value', (pref.alt_dl_limit.toInt() / 1024));

                    $('enable_protocol_combobox').setProperty('value', pref.bittorrent_protocol);
                    $('limit_utp_rate_checkbox').setProperty('checked', pref.limit_utp_rate);
                    $('limit_tcp_overhead_checkbox').setProperty('checked', pref.limit_tcp_overhead);
                    $('limit_lan_peers_checkbox').setProperty('checked', pref.limit_lan_peers);

                    // Scheduling
                    $('limitSchedulingCheckbox').setProperty('checked', pref.scheduler_enabled);
                    $('schedule_from_hour').setProperty('value', time_padding(pref.schedule_from_hour));
                    $('schedule_from_min').setProperty('value', time_padding(pref.schedule_from_min));
                    $('schedule_to_hour').setProperty('value', time_padding(pref.schedule_to_hour));
                    $('schedule_to_min').setProperty('value', time_padding(pref.schedule_to_min));
                    $('schedule_freq_select').setProperty('value', pref.scheduler_days);
                    updateSchedulingEnabled();

                    // Bittorrent tab
                    // Privacy
                    $('dht_checkbox').setProperty('checked', pref.dht);
                    $('pex_checkbox').setProperty('checked', pref.pex);
                    $('lsd_checkbox').setProperty('checked', pref.lsd);
                    const encryption = pref.encryption.toInt();
                    $('encryption_select').getChildren('option')[encryption].selected = true;
                    $('anonymous_mode_checkbox').setProperty('checked', pref.anonymous_mode);

                    $('maxActiveCheckingTorrents').setProperty('value', pref.max_active_checking_torrents);

                    // Torrent Queueing
                    $('queueing_checkbox').setProperty('checked', pref.queueing_enabled);
                    $('max_active_dl_value').setProperty('value', pref.max_active_downloads.toInt());
                    $('max_active_up_value').setProperty('value', pref.max_active_uploads.toInt());
                    $('max_active_to_value').setProperty('value', pref.max_active_torrents.toInt());
                    $('dont_count_slow_torrents_checkbox').setProperty('checked', pref.dont_count_slow_torrents);
                    $('dl_rate_threshold').setProperty('value', pref.slow_torrent_dl_rate_threshold.toInt());
                    $('ul_rate_threshold').setProperty('value', pref.slow_torrent_ul_rate_threshold.toInt());
                    $('torrent_inactive_timer').setProperty('value', pref.slow_torrent_inactive_timer.toInt());
                    updateQueueingSystem();

                    // Share Limiting
                    $('max_ratio_checkbox').setProperty('checked', pref.max_ratio_enabled);
                    $('max_ratio_value').setProperty('value', (pref.max_ratio_enabled ? pref.max_ratio : 1));
                    $('max_seeding_time_checkbox').setProperty('checked', pref.max_seeding_time_enabled);
                    $('max_seeding_time_value').setProperty('value', (pref.max_seeding_time_enabled ? pref.max_seeding_time.toInt() : 1440));
                    $('max_inactive_seeding_time_checkbox').setProperty('checked', pref.max_inactive_seeding_time_enabled);
                    $('max_inactive_seeding_time_value').setProperty('value', (pref.max_inactive_seeding_time_enabled ? pref.max_inactive_seeding_time.toInt() : 1440));
                    let maxRatioAct = 0;
                    switch (pref.max_ratio_act.toInt()) {
                        case 0: // Pause
                        default:
                            maxRatioAct = 0;
                            break;
                        case 1: // Remove
                            maxRatioAct = 1;
                            break;
                        case 2: // Enable super seeding
                            maxRatioAct = 3;
                            break;
                        case 3: // Remove torrent and files
                            maxRatioAct = 2;
                            break;
                    }
                    $('max_ratio_act').getChildren('option')[maxRatioAct].selected = true;
                    updateMaxRatioTimeEnabled();

                    // Add trackers
                    $('add_trackers_checkbox').setProperty('checked', pref.add_trackers_enabled);
                    $('add_trackers_textarea').setProperty('value', pref.add_trackers);
                    updateAddTrackersEnabled();

                    // RSS Tab
                    $('enable_fetching_rss_feeds_checkbox').setProperty('checked', pref.rss_processing_enabled);
                    $('feed_refresh_interval').setProperty('value', pref.rss_refresh_interval);
                    $('feedFetchDelay').setProperty('value', pref.rss_fetch_delay);
                    $('maximum_article_number').setProperty('value', pref.rss_max_articles_per_feed);
                    $('enable_auto_downloading_rss_torrents_checkbox').setProperty('checked', pref.rss_auto_downloading_enabled);
                    $('downlock_repack_proper_episodes').setProperty('checked', pref.rss_download_repack_proper_episodes);
                    $('rss_filter_textarea').setProperty('value', pref.rss_smart_episode_filters);

                    // WebUI tab
                    // Language
                    updateWebuiLocaleSelect(pref.locale);
                    $('performanceWarning').setProperty('checked', pref.performance_warning);

                    // HTTP Server
                    $('webui_domain_textarea').setProperty('value', pref.web_ui_domain_list);
                    $('webui_address_value').setProperty('value', pref.web_ui_address);
                    $('webui_port_value').setProperty('value', pref.web_ui_port);
                    $('webui_upnp_checkbox').setProperty('checked', pref.web_ui_upnp);
                    $('use_https_checkbox').setProperty('checked', pref.use_https);
                    $('ssl_cert_text').setProperty('value', pref.web_ui_https_cert_path);
                    $('ssl_key_text').setProperty('value', pref.web_ui_https_key_path);
                    updateHttpsSettings();

                    // Authentication
                    $('webui_username_text').setProperty('value', pref.web_ui_username);
                    $('bypass_local_auth_checkbox').setProperty('checked', pref.bypass_local_auth);
                    $('bypass_auth_subnet_whitelist_checkbox').setProperty('checked', pref.bypass_auth_subnet_whitelist_enabled);
                    $('bypass_auth_subnet_whitelist_textarea').setProperty('value', pref.bypass_auth_subnet_whitelist);
                    updateBypasssAuthSettings();
                    $('webUIMaxAuthFailCountInput').setProperty('value', pref.web_ui_max_auth_fail_count.toInt());
                    $('webUIBanDurationInput').setProperty('value', pref.web_ui_ban_duration.toInt());
                    $('webUISessionTimeoutInput').setProperty('value', pref.web_ui_session_timeout.toInt());

                    // Use alternative WebUI
                    $('use_alt_webui_checkbox').setProperty('checked', pref.alternative_webui_enabled);
                    $('webui_files_location_textarea').setProperty('value', pref.alternative_webui_path);
                    updateAlternativeWebUISettings();

                    // Security
                    $('clickjacking_protection_checkbox').setProperty('checked', pref.web_ui_clickjacking_protection_enabled);
                    $('csrf_protection_checkbox').setProperty('checked', pref.web_ui_csrf_protection_enabled);
                    $('secureCookieCheckbox').setProperty('checked', pref.web_ui_secure_cookie_enabled);
                    $('host_header_validation_checkbox').setProperty('checked', pref.web_ui_host_header_validation_enabled);
                    updateHostHeaderValidationSettings();

                    // Custom HTTP headers
                    $('webUIUseCustomHTTPHeadersCheckbox').setProperty('checked', pref.web_ui_use_custom_http_headers_enabled);
                    $('webUICustomHTTPHeadersTextarea').setProperty('value', pref.web_ui_custom_http_headers);
                    updateWebUICustomHTTPHeadersSettings();

                    // Reverse Proxy
                    $('webUIReverseProxySupportCheckbox').setProperty('checked', pref.web_ui_reverse_proxy_enabled);
                    $('webUIReverseProxiesListTextarea').setProperty('value', pref.web_ui_reverse_proxies_list);
                    updateWebUIReverseProxySettings();

                    // Update my dynamic domain name
                    $('use_dyndns_checkbox').setProperty('checked', pref.dyndns_enabled);
                    $('dyndns_select').setProperty('value', pref.dyndns_service);
                    $('dyndns_domain_text').setProperty('value', pref.dyndns_domain);
                    $('dyndns_username_text').setProperty('value', pref.dyndns_username);
                    $('dyndns_password_text').setProperty('value', pref.dyndns_password);
                    updateDynDnsSettings();

                    // Advanced settings
                    // qBittorrent section
                    $('resumeDataStorageType').setProperty('value', pref.resume_data_storage_type);
                    $('memoryWorkingSetLimit').setProperty('value', pref.memory_working_set_limit);
                    updateNetworkInterfaces(pref.current_network_interface, pref.current_interface_name);
                    updateInterfaceAddresses(pref.current_network_interface, pref.current_interface_address);
                    $('saveResumeDataInterval').setProperty('value', pref.save_resume_data_interval);
                    $('torrentFileSizeLimit').setProperty('value', (pref.torrent_file_size_limit / 1024 / 1024));
                    $('recheckTorrentsOnCompletion').setProperty('checked', pref.recheck_completed_torrents);
                    $('appInstanceName').setProperty('value', pref.app_instance_name);
                    $('refreshInterval').setProperty('value', pref.refresh_interval);
                    $('resolvePeerCountries').setProperty('checked', pref.resolve_peer_countries);
                    $('reannounceWhenAddressChanged').setProperty('checked', pref.reannounce_when_address_changed);
                    // libtorrent section
                    $('bdecodeDepthLimit').setProperty('value', pref.bdecode_depth_limit);
                    $('bdecodeTokenLimit').setProperty('value', pref.bdecode_token_limit);
                    $('asyncIOThreads').setProperty('value', pref.async_io_threads);
                    $('hashingThreads').setProperty('value', pref.hashing_threads);
                    $('filePoolSize').setProperty('value', pref.file_pool_size);
                    $('outstandMemoryWhenCheckingTorrents').setProperty('value', pref.checking_memory_use);
                    $('diskCache').setProperty('value', pref.disk_cache);
                    $('diskCacheExpiryInterval').setProperty('value', pref.disk_cache_ttl);
                    $('diskQueueSize').setProperty('value', (pref.disk_queue_size / 1024));
                    $('diskIOType').setProperty('value', pref.disk_io_type);
                    $('diskIOReadMode').setProperty('value', pref.disk_io_read_mode);
                    $('diskIOWriteMode').setProperty('value', pref.disk_io_write_mode);
                    $('coalesceReadsAndWrites').setProperty('checked', pref.enable_coalesce_read_write);
                    $('pieceExtentAffinity').setProperty('checked', pref.enable_piece_extent_affinity);
                    $('sendUploadPieceSuggestions').setProperty('checked', pref.enable_upload_suggestions);
                    $('sendBufferWatermark').setProperty('value', pref.send_buffer_watermark);
                    $('sendBufferLowWatermark').setProperty('value', pref.send_buffer_low_watermark);
                    $('sendBufferWatermarkFactor').setProperty('value', pref.send_buffer_watermark_factor);
                    $('connectionSpeed').setProperty('value', pref.connection_speed);
                    $('socketSendBufferSize').setProperty('value', (pref.socket_send_buffer_size / 1024));
                    $('socketReceiveBufferSize').setProperty('value', (pref.socket_receive_buffer_size / 1024));
                    $('socketBacklogSize').setProperty('value', pref.socket_backlog_size);
                    $('outgoingPortsMin').setProperty('value', pref.outgoing_ports_min);
                    $('outgoingPortsMax').setProperty('value', pref.outgoing_ports_max);
                    $('UPnPLeaseDuration').setProperty('value', pref.upnp_lease_duration);
                    $('peerToS').setProperty('value', pref.peer_tos);
                    $('utpTCPMixedModeAlgorithm').setProperty('value', pref.utp_tcp_mixed_mode);
                    $('IDNSupportCheckbox').setProperty('checked', pref.idn_support_enabled);
                    $('allowMultipleConnectionsFromTheSameIPAddress').setProperty('checked', pref.enable_multi_connections_from_same_ip);
                    $('validateHTTPSTrackerCertificate').setProperty('checked', pref.validate_https_tracker_certificate);
                    $('mitigateSSRF').setProperty('checked', pref.ssrf_mitigation);
                    $('blockPeersOnPrivilegedPorts').setProperty('checked', pref.block_peers_on_privileged_ports);
                    $('enableEmbeddedTracker').setProperty('checked', pref.enable_embedded_tracker);
                    $('embeddedTrackerPort').setProperty('value', pref.embedded_tracker_port);
                    $('embeddedTrackerPortForwarding').setProperty('checked', pref.embedded_tracker_port_forwarding);
                    $('markOfTheWeb').setProperty('checked', pref.mark_of_the_web);
                    $('pythonExecutablePath').setProperty('value', pref.python_executable_path);
                    $('uploadSlotsBehavior').setProperty('value', pref.upload_slots_behavior);
                    $('uploadChokingAlgorithm').setProperty('value', pref.upload_choking_algorithm);
                    $('announceAllTrackers').setProperty('checked', pref.announce_to_all_trackers);
                    $('announceAllTiers').setProperty('checked', pref.announce_to_all_tiers);
                    $('announceIP').setProperty('value', pref.announce_ip);
                    $('maxConcurrentHTTPAnnounces').setProperty('value', pref.max_concurrent_http_announces);
                    $('stopTrackerTimeout').setProperty('value', pref.stop_tracker_timeout);
                    $('peerTurnover').setProperty('value', pref.peer_turnover);
                    $('peerTurnoverCutoff').setProperty('value', pref.peer_turnover_cutoff);
                    $('peerTurnoverInterval').setProperty('value', pref.peer_turnover_interval);
                    $('requestQueueSize').setProperty('value', pref.request_queue_size);
                    $('dhtBootstrapNodes').setProperty('value', pref.dht_bootstrap_nodes);
                    $('i2pInboundQuantity').setProperty('value', pref.i2p_inbound_quantity);
                    $('i2pOutboundQuantity').setProperty('value', pref.i2p_outbound_quantity);
                    $('i2pInboundLength').setProperty('value', pref.i2p_inbound_length);
                    $('i2pOutboundLength').setProperty('value', pref.i2p_outbound_length);
                }
            });
        };

        const applyPreferences = function() {
            const settings = {};
            // Validate form data

            // Behavior tab
            settings['file_log_enabled'] = $('filelog_checkbox').getProperty('checked');
            settings['file_log_path'] = $('filelog_save_path_input').getProperty('value');
            settings['file_log_backup_enabled'] = $('filelog_backup_checkbox').getProperty('checked');
            settings['file_log_max_size'] = Number($('filelog_max_size_input').getProperty('value'));
            settings['file_log_delete_old'] = $('filelog_delete_old_checkbox').getProperty('checked');
            settings['file_log_age'] = Number($('filelog_age_input').getProperty('value'));
            settings['file_log_age_type'] = Number($('filelog_age_type_select').getProperty('value'));

            // Downloads tab
            // When adding a torrent
            settings['torrent_content_layout'] = $('contentlayout_select').getSelected()[0].getProperty('value');
            settings['add_to_top_of_queue'] = $('addToTopOfQueueCheckbox').getProperty('checked');
            settings['start_paused_enabled'] = $('dontstartdownloads_checkbox').getProperty('checked');
            settings['torrent_stop_condition'] = $('stopConditionSelect').getSelected()[0].getProperty('value');
            settings['auto_delete_mode'] = Number($('deletetorrentfileafter_checkbox').getProperty('checked'));

            settings['preallocate_all'] = $('preallocateall_checkbox').getProperty('checked');
            settings['incomplete_files_ext'] = $('appendext_checkbox').getProperty('checked');
            settings['use_unwanted_folder'] = $('unwantedfolder_checkbox').getProperty('checked');

            // Saving Management
            settings['auto_tmm_enabled'] = ($('default_tmm_combobox').getProperty('value') === 'true');
            settings['torrent_changed_tmm_enabled'] = ($('torrent_changed_tmm_combobox').getProperty('value') === 'true');
            settings['save_path_changed_tmm_enabled'] = ($('save_path_changed_tmm_combobox').getProperty('value') === 'true');
            settings['category_changed_tmm_enabled'] = ($('category_changed_tmm_combobox').getProperty('value') === 'true');
            settings['use_subcategories'] = $('use_subcategories_checkbox').getProperty('checked');
            settings['save_path'] = $('savepath_text').getProperty('value');
            settings['temp_path_enabled'] = $('temppath_checkbox').getProperty('checked');
            settings['temp_path'] = $('temppath_text').getProperty('value');
            if ($('exportdir_checkbox').getProperty('checked'))
                settings['export_dir'] = $('exportdir_text').getProperty('value');
            else
                settings['export_dir'] = '';
            if ($('exportdirfin_checkbox').getProperty('checked'))
                settings['export_dir_fin'] = $('exportdirfin_text').getProperty('value');
            else
                settings['export_dir_fin'] = '';

            // Automatically add torrents from
            settings['scan_dirs'] = getWatchedFolders();

            // Excluded file names
            settings['excluded_file_names_enabled'] = $('excludedFileNamesCheckbox').getProperty('checked');
            settings['excluded_file_names'] = $('excludedFileNamesTextarea').getProperty('value');

            // Email notification upon download completion
            settings['mail_notification_enabled'] = $('mail_notification_checkbox').getProperty('checked');
            settings['mail_notification_sender'] = $('src_email_txt').getProperty('value');
            settings['mail_notification_email'] = $('dest_email_txt').getProperty('value');
            settings['mail_notification_smtp'] = $('smtp_server_txt').getProperty('value');
            settings['mail_notification_ssl_enabled'] = $('mail_ssl_checkbox').getProperty('checked');
            settings['mail_notification_auth_enabled'] = $('mail_auth_checkbox').getProperty('checked');
            settings['mail_notification_username'] = $('mail_username_text').getProperty('value');
            settings['mail_notification_password'] = $('mail_password_text').getProperty('value');

            // Run an external program on torrent added
            settings['autorun_on_torrent_added_enabled'] = $('autorunOnTorrentAddedCheckbox').getProperty('checked');
            settings['autorun_on_torrent_added_program'] = $('autorunOnTorrentAddedProgram').getProperty('value');
            // Run an external program on torrent finished
            settings['autorun_enabled'] = $('autorun_checkbox').getProperty('checked');
            settings['autorun_program'] = $('autorunProg_txt').getProperty('value');

            // Connection tab
            // Listening Port
            const listen_port = $('port_value').getProperty('value').toInt();
            if (isNaN(listen_port) || (listen_port < 0) || (listen_port > 65535)) {
                alert("QBT_TR(The port used for incoming connections must be between 0 and 65535.)QBT_TR[CONTEXT=HttpServer]");
                return;
            }
            settings['listen_port'] = listen_port;
            settings['upnp'] = $('upnp_checkbox').getProperty('checked');

            // Connections Limits
            let max_connec = -1;
            if ($('max_connec_checkbox').getProperty('checked')) {
                max_connec = $('max_connec_value').getProperty('value').toInt();
                if (isNaN(max_connec) || max_connec <= 0) {
                    alert("QBT_TR(Maximum number of connections limit must be greater than 0 or disabled.)QBT_TR[CONTEXT=HttpServer]");
                    return;
                }
            }
            settings['max_connec'] = max_connec;
            let max_connec_per_torrent = -1;
            if ($('max_connec_per_torrent_checkbox').getProperty('checked')) {
                max_connec_per_torrent = $('max_connec_per_torrent_value').getProperty('value').toInt();
                if (isNaN(max_connec_per_torrent) || max_connec_per_torrent <= 0) {
                    alert("QBT_TR(Maximum number of connections per torrent limit must be greater than 0 or disabled.)QBT_TR[CONTEXT=HttpServer]");
                    return;
                }
            }
            settings['max_connec_per_torrent'] = max_connec_per_torrent;
            let max_uploads = -1;
            if ($('max_uploads_checkbox').getProperty('checked')) {
                max_uploads = $('max_uploads_value').getProperty('value').toInt();
                if (isNaN(max_uploads) || max_uploads <= 0) {
                    alert("QBT_TR(Global number of upload slots limit must be greater than 0 or disabled.)QBT_TR[CONTEXT=HttpServer]");
                    return;
                }
            }
            settings['max_uploads'] = max_uploads;
            let max_uploads_per_torrent = -1;
            if ($('max_uploads_per_torrent_checkbox').getProperty('checked')) {
                max_uploads_per_torrent = $('max_uploads_per_torrent_value').getProperty('value').toInt();
                if (isNaN(max_uploads_per_torrent) || max_uploads_per_torrent <= 0) {
                    alert("QBT_TR(Maximum number of upload slots per torrent limit must be greater than 0 or disabled.)QBT_TR[CONTEXT=HttpServer]");
                    return;
                }
            }
            settings['max_uploads_per_torrent'] = max_uploads_per_torrent;

            // I2P
            settings['i2p_enabled'] = $('i2pEnabledCheckbox').getProperty('checked');
            settings['i2p_address'] = $('i2pAddress').getProperty('value');
            settings['i2p_port'] = $('i2pPort').getProperty('value').toInt();
            settings['i2p_mixed_mode'] = $('i2pMixedMode').getProperty('checked');

            // Proxy Server
            settings['proxy_type'] = $('peer_proxy_type_select').getProperty('value');
            settings['proxy_ip'] = $('peer_proxy_host_text').getProperty('value');
            settings['proxy_port'] = $('peer_proxy_port_value').getProperty('value').toInt();
            settings['proxy_auth_enabled'] = $('peer_proxy_auth_checkbox').getProperty('checked');
            settings['proxy_username'] = $('peer_proxy_username_text').getProperty('value');
            settings['proxy_password'] = $('peer_proxy_password_text').getProperty('value');
            settings['proxy_hostname_lookup'] = $('proxyHostnameLookupCheckbox').getProperty('checked');
            settings['proxy_bittorrent'] = $('proxy_bittorrent_checkbox').getProperty('checked');
            settings['proxy_peer_connections'] = $('use_peer_proxy_checkbox').getProperty('checked');
            settings['proxy_rss'] = $('proxy_rss_checkbox').getProperty('checked');
            settings['proxy_misc'] = $('proxy_misc_checkbox').getProperty('checked');

            // IP Filtering
            settings['ip_filter_enabled'] = $('ipfilter_text_checkbox').getProperty('checked');
            settings['ip_filter_path'] = $('ipfilter_text').getProperty('value');
            settings['ip_filter_trackers'] = $('ipfilter_trackers_checkbox').getProperty('checked');
            settings['banned_IPs'] = $('banned_IPs_textarea').getProperty('value');

            // Speed tab
            // Global Rate Limits
            const up_limit = $('up_limit_value').getProperty('value').toInt() * 1024;
            if (isNaN(up_limit) || up_limit < 0) {
                alert("QBT_TR(Global upload rate limit must be greater than 0 or disabled.)QBT_TR[CONTEXT=HttpServer]");
                return;
            }
            settings['up_limit'] = up_limit;

            const dl_limit = $('dl_limit_value').getProperty('value').toInt() * 1024;
            if (isNaN(dl_limit) || dl_limit < 0) {
                alert("QBT_TR(Global download rate limit must be greater than 0 or disabled.)QBT_TR[CONTEXT=HttpServer]");
                return;
            }
            settings['dl_limit'] = dl_limit;

            // Alternative Global Rate Limits
            const alt_up_limit = $('alt_up_limit_value').getProperty('value').toInt() * 1024;
            if (isNaN(alt_up_limit) || alt_up_limit < 0) {
                alert("QBT_TR(Alternative upload rate limit must be greater than 0 or disabled.)QBT_TR[CONTEXT=HttpServer]");
                return;
            }
            settings['alt_up_limit'] = alt_up_limit;

            const alt_dl_limit = $('alt_dl_limit_value').getProperty('value').toInt() * 1024;
            if (isNaN(alt_dl_limit) || alt_dl_limit < 0) {
                alert("QBT_TR(Alternative download rate limit must be greater than 0 or disabled.)QBT_TR[CONTEXT=HttpServer]");
                return;
            }
            settings['alt_dl_limit'] = alt_dl_limit;

            settings['bittorrent_protocol'] = Number($('enable_protocol_combobox').getProperty('value'));
            settings['limit_utp_rate'] = $('limit_utp_rate_checkbox').getProperty('checked');
            settings['limit_tcp_overhead'] = $('limit_tcp_overhead_checkbox').getProperty('checked');
            settings['limit_lan_peers'] = $('limit_lan_peers_checkbox').getProperty('checked');

            // Scheduler
            const scheduling_enabled = $('limitSchedulingCheckbox').getProperty('checked');
            settings['scheduler_enabled'] = scheduling_enabled;
            if (scheduling_enabled) {
                settings['schedule_from_hour'] = $('schedule_from_hour').getProperty('value').toInt();
                settings['schedule_from_min'] = $('schedule_from_min').getProperty('value').toInt();
                settings['schedule_to_hour'] = $('schedule_to_hour').getProperty('value').toInt();
                settings['schedule_to_min'] = $('schedule_to_min').getProperty('value').toInt();
                settings['scheduler_days'] = $('schedule_freq_select').getProperty('value').toInt();
            }

            // Bittorrent tab
            // Privacy
            settings['dht'] = $('dht_checkbox').getProperty('checked');
            settings['pex'] = $('pex_checkbox').getProperty('checked');
            settings['lsd'] = $('lsd_checkbox').getProperty('checked');
            settings['encryption'] = Number($('encryption_select').getSelected()[0].getProperty('value'));
            settings['anonymous_mode'] = $('anonymous_mode_checkbox').getProperty('checked');

            settings['max_active_checking_torrents'] = Number($('maxActiveCheckingTorrents').getProperty('value'));

            // Torrent Queueing
            settings['queueing_enabled'] = $('queueing_checkbox').getProperty('checked');
            if ($('queueing_checkbox').getProperty('checked')) {
                const max_active_downloads = $('max_active_dl_value').getProperty('value').toInt();
                if (isNaN(max_active_downloads) || max_active_downloads < -1) {
                    alert("QBT_TR(Maximum active downloads must be greater than -1.)QBT_TR[CONTEXT=HttpServer]");
                    return;
                }
                settings['max_active_downloads'] = max_active_downloads;
                const max_active_uploads = $('max_active_up_value').getProperty('value').toInt();
                if (isNaN(max_active_uploads) || max_active_uploads < -1) {
                    alert("QBT_TR(Maximum active uploads must be greater than -1.)QBT_TR[CONTEXT=HttpServer]");
                    return;
                }
                settings['max_active_uploads'] = max_active_uploads;
                const max_active_torrents = $('max_active_to_value').getProperty('value').toInt();
                if (isNaN(max_active_torrents) || max_active_torrents < -1) {
                    alert("QBT_TR(Maximum active torrents must be greater than -1.)QBT_TR[CONTEXT=HttpServer]");
                    return;
                }
                settings['max_active_torrents'] = max_active_torrents;
                settings['dont_count_slow_torrents'] = $('dont_count_slow_torrents_checkbox').getProperty('checked');
                const dl_rate_threshold = $('dl_rate_threshold').getProperty('value').toInt();
                if (isNaN(dl_rate_threshold) || (dl_rate_threshold < 1)) {
                    alert("QBT_TR(Download rate threshold must be greater than 0.)QBT_TR[CONTEXT=HttpServer]");
                    return;
                }
                settings['slow_torrent_dl_rate_threshold'] = dl_rate_threshold;
                const ul_rate_threshold = $('ul_rate_threshold').getProperty('value').toInt();
                if (isNaN(ul_rate_threshold) || (ul_rate_threshold < 1)) {
                    alert("QBT_TR(Upload rate threshold must be greater than 0.)QBT_TR[CONTEXT=HttpServer]");
                    return;
                }
                settings['slow_torrent_ul_rate_threshold'] = ul_rate_threshold;
                const torrent_inactive_timer = $('torrent_inactive_timer').getProperty('value').toInt();
                if (isNaN(torrent_inactive_timer) || (torrent_inactive_timer < 1)) {
                    alert("QBT_TR(Torrent inactivity timer must be greater than 0.)QBT_TR[CONTEXT=HttpServer]");
                    return;
                }
                settings['slow_torrent_inactive_timer'] = torrent_inactive_timer;
            }

            // Share Ratio Limiting
            let max_ratio = -1;
            if ($('max_ratio_checkbox').getProperty('checked')) {
                max_ratio = $('max_ratio_value').getProperty('value').toFloat();
                if (isNaN(max_ratio) || (max_ratio < 0) || (max_ratio > 9998)) {
                    alert("QBT_TR(Share ratio limit must be between 0 and 9998.)QBT_TR[CONTEXT=HttpServer]");
                    return;
                }
            }
            settings['max_ratio_enabled'] = $('max_ratio_checkbox').getProperty('checked');
            settings['max_ratio'] = max_ratio;

            let max_seeding_time = -1;
            if ($('max_seeding_time_checkbox').getProperty('checked')) {
                max_seeding_time = $('max_seeding_time_value').getProperty('value').toInt();
                if (isNaN(max_seeding_time) || (max_seeding_time < 0) || (max_seeding_time > 525600)) {
                    alert("QBT_TR(Seeding time limit must be between 0 and 525600 minutes.)QBT_TR[CONTEXT=HttpServer]");
                    return;
                }
            }
            settings['max_seeding_time_enabled'] = $('max_seeding_time_checkbox').getProperty('checked');
            settings['max_seeding_time'] = max_seeding_time;
            settings['max_ratio_act'] = $('max_ratio_act').getProperty('value').toInt();

            let max_inactive_seeding_time = -1;
            if ($('max_inactive_seeding_time_checkbox').getProperty('checked')) {
                max_inactive_seeding_time = $('max_inactive_seeding_time_value').getProperty('value').toInt();
                if (isNaN(max_inactive_seeding_time) || (max_inactive_seeding_time < 0) || (max_inactive_seeding_time > 525600)) {
                    alert("QBT_TR(Seeding time limit must be between 0 and 525600 minutes.)QBT_TR[CONTEXT=HttpServer]");
                    return;
                }
            }
            settings['max_inactive_seeding_time_enabled'] = $('max_inactive_seeding_time_checkbox').getProperty('checked');
            settings['max_inactive_seeding_time'] = max_inactive_seeding_time;
            settings['max_ratio_act'] = $('max_ratio_act').getProperty('value').toInt();

            // Add trackers
            settings['add_trackers_enabled'] = $('add_trackers_checkbox').getProperty('checked');
            settings['add_trackers'] = $('add_trackers_textarea').getProperty('value');

            // RSS Tab
            settings['rss_processing_enabled'] = $('enable_fetching_rss_feeds_checkbox').getProperty('checked');
            settings['rss_refresh_interval'] = Number($('feed_refresh_interval').getProperty('value'));
            settings['rss_fetch_delay'] = Number($('feedFetchDelay').getProperty('value'));
            settings['rss_max_articles_per_feed'] = Number($('maximum_article_number').getProperty('value'));
            settings['rss_auto_downloading_enabled'] = $('enable_auto_downloading_rss_torrents_checkbox').getProperty('checked');
            settings['rss_download_repack_proper_episodes'] = $('downlock_repack_proper_episodes').getProperty('checked');
            settings['rss_smart_episode_filters'] = $('rss_filter_textarea').getProperty('value');

            // WebUI tab
            // Language
            settings['locale'] = $('locale_select').getProperty('value');
            settings['performance_warning'] = $('performanceWarning').getProperty('checked');

            // HTTP Server
            settings['web_ui_domain_list'] = $('webui_domain_textarea').getProperty('value');
            const web_ui_address = $('webui_address_value').getProperty('value').toString();
            const web_ui_port = $('webui_port_value').getProperty('value').toInt();
            if (isNaN(web_ui_port) || web_ui_port < 1 || web_ui_port > 65535) {
                alert("QBT_TR(The port used for the WebUI must be between 1 and 65535.)QBT_TR[CONTEXT=HttpServer]");
                return;
            }
            settings['web_ui_address'] = web_ui_address;
            settings['web_ui_port'] = web_ui_port;
            settings['web_ui_upnp'] = $('webui_upnp_checkbox').getProperty('checked');

            const useHTTPS = $('use_https_checkbox').getProperty('checked');
            settings['use_https'] = useHTTPS;

            const httpsCertificate = $('ssl_cert_text').getProperty('value');
            settings['web_ui_https_cert_path'] = httpsCertificate;
            if (useHTTPS && (httpsCertificate.length === 0)) {
                alert("QBT_TR(HTTPS certificate should not be empty)QBT_TR[CONTEXT=OptionsDialog]");
                return;
            }

            const httpsKey = $('ssl_key_text').getProperty('value');
            settings['web_ui_https_key_path'] = httpsKey;
            if (useHTTPS && (httpsKey.length === 0)) {
                alert("QBT_TR(HTTPS key should not be empty)QBT_TR[CONTEXT=OptionsDialog]");
                return;
            }

            // Authentication
            const web_ui_username = $('webui_username_text').getProperty('value');
            if (web_ui_username.length < 3) {
                alert("QBT_TR(The WebUI username must be at least 3 characters long.)QBT_TR[CONTEXT=OptionsDialog]");
                return;
            }
            const web_ui_password = $('webui_password_text').getProperty('value');
            if ((0 < web_ui_password.length) && (web_ui_password.length < 6)) {
                alert("QBT_TR(The WebUI password must be at least 6 characters long.)QBT_TR[CONTEXT=OptionsDialog]");
                return;
            }

            settings['web_ui_username'] = web_ui_username;
            if (web_ui_password.length > 0)
                settings['web_ui_password'] = web_ui_password;
            settings['bypass_local_auth'] = $('bypass_local_auth_checkbox').getProperty('checked');
            settings['bypass_auth_subnet_whitelist_enabled'] = $('bypass_auth_subnet_whitelist_checkbox').getProperty('checked');
            settings['bypass_auth_subnet_whitelist'] = $('bypass_auth_subnet_whitelist_textarea').getProperty('value');
            settings['web_ui_max_auth_fail_count'] = Number($('webUIMaxAuthFailCountInput').getProperty('value'));
            settings['web_ui_ban_duration'] = Number($('webUIBanDurationInput').getProperty('value'));
            settings['web_ui_session_timeout'] = Number($('webUISessionTimeoutInput').getProperty('value'));

            // Use alternative WebUI
            const alternative_webui_enabled = $('use_alt_webui_checkbox').getProperty('checked');
            const webui_files_location_textarea = $('webui_files_location_textarea').getProperty('value');
            if (alternative_webui_enabled && (webui_files_location_textarea.trim() === "")) {
                alert("QBT_TR(The alternative WebUI files location cannot be blank.)QBT_TR[CONTEXT=OptionsDialog]");
                return;
            }
            settings['alternative_webui_enabled'] = alternative_webui_enabled;
            settings['alternative_webui_path'] = webui_files_location_textarea;

            // Security
            settings['web_ui_clickjacking_protection_enabled'] = $('clickjacking_protection_checkbox').getProperty('checked');
            settings['web_ui_csrf_protection_enabled'] = $('csrf_protection_checkbox').getProperty('checked');
            settings['web_ui_secure_cookie_enabled'] = $('secureCookieCheckbox').getProperty('checked');
            settings['web_ui_host_header_validation_enabled'] = $('host_header_validation_checkbox').getProperty('checked');

            // Custom HTTP headers
            settings['web_ui_use_custom_http_headers_enabled'] = $('webUIUseCustomHTTPHeadersCheckbox').getProperty('checked');
            settings['web_ui_custom_http_headers'] = $('webUICustomHTTPHeadersTextarea').getProperty('value');

            // Reverse Proxy
            settings['web_ui_reverse_proxy_enabled'] = $('webUIReverseProxySupportCheckbox').getProperty('checked');
            settings['web_ui_reverse_proxies_list'] = $('webUIReverseProxiesListTextarea').getProperty('value');

            // Update my dynamic domain name
            settings['dyndns_enabled'] = $('use_dyndns_checkbox').getProperty('checked');
            settings['dyndns_service'] = Number($('dyndns_select').getProperty('value'));
            settings['dyndns_domain'] = $('dyndns_domain_text').getProperty('value');
            settings['dyndns_username'] = $('dyndns_username_text').getProperty('value');
            settings['dyndns_password'] = $('dyndns_password_text').getProperty('value');

            // Update advanced settings
            // qBittorrent section
            settings['resume_data_storage_type'] = $('resumeDataStorageType').getProperty('value');
            settings['memory_working_set_limit'] = Number($('memoryWorkingSetLimit').getProperty('value'));
            settings['current_network_interface'] = $('networkInterface').getProperty('value');
            settings['current_interface_address'] = $('optionalIPAddressToBind').getProperty('value');
            settings['save_resume_data_interval'] = Number($('saveResumeDataInterval').getProperty('value'));
            settings['torrent_file_size_limit'] = ($('torrentFileSizeLimit').getProperty('value') * 1024 * 1024);
            settings['recheck_completed_torrents'] = $('recheckTorrentsOnCompletion').getProperty('checked');
            settings['app_instance_name'] = $('appInstanceName').getProperty('value');
            settings['refresh_interval'] = Number($('refreshInterval').getProperty('value'));
            settings['resolve_peer_countries'] = $('resolvePeerCountries').getProperty('checked');
            settings['reannounce_when_address_changed'] = $('reannounceWhenAddressChanged').getProperty('checked');

            // libtorrent section
            settings['bdecode_depth_limit'] = Number($('bdecodeDepthLimit').getProperty('value'));
            settings['bdecode_token_limit'] = Number($('bdecodeTokenLimit').getProperty('value'));
            settings['async_io_threads'] = Number($('asyncIOThreads').getProperty('value'));
            settings['hashing_threads'] = Number($('hashingThreads').getProperty('value'));
            settings['file_pool_size'] = Number($('filePoolSize').getProperty('value'));
            settings['checking_memory_use'] = Number($('outstandMemoryWhenCheckingTorrents').getProperty('value'));
            settings['disk_cache'] = Number($('diskCache').getProperty('value'));
            settings['disk_cache_ttl'] = Number($('diskCacheExpiryInterval').getProperty('value'));
            settings['disk_queue_size'] = (Number($('diskQueueSize').getProperty('value')) * 1024);
            settings['disk_io_type'] = Number($('diskIOType').getProperty('value'));
            settings['disk_io_read_mode'] = Number($('diskIOReadMode').getProperty('value'));
            settings['disk_io_write_mode'] = Number($('diskIOWriteMode').getProperty('value'));
            settings['enable_coalesce_read_write'] = $('coalesceReadsAndWrites').getProperty('checked');
            settings['enable_piece_extent_affinity'] = $('pieceExtentAffinity').getProperty('checked');
            settings['enable_upload_suggestions'] = $('sendUploadPieceSuggestions').getProperty('checked');
            settings['send_buffer_watermark'] = Number($('sendBufferWatermark').getProperty('value'));
            settings['send_buffer_low_watermark'] = Number($('sendBufferLowWatermark').getProperty('value'));
            settings['send_buffer_watermark_factor'] = Number($('sendBufferWatermarkFactor').getProperty('value'));
            settings['connection_speed'] = Number($('connectionSpeed').getProperty('value'));
            settings['socket_send_buffer_size'] = ($('socketSendBufferSize').getProperty('value') * 1024);
            settings['socket_receive_buffer_size'] = ($('socketReceiveBufferSize').getProperty('value') * 1024);
            settings['socket_backlog_size'] = Number($('socketBacklogSize').getProperty('value'));
            settings['outgoing_ports_min'] = Number($('outgoingPortsMin').getProperty('value'));
            settings['outgoing_ports_max'] = Number($('outgoingPortsMax').getProperty('value'));
            settings['upnp_lease_duration'] = Number($('UPnPLeaseDuration').getProperty('value'));
            settings['peer_tos'] = Number($('peerToS').getProperty('value'));
            settings['utp_tcp_mixed_mode'] = Number($('utpTCPMixedModeAlgorithm').getProperty('value'));
            settings['idn_support_enabled'] = $('IDNSupportCheckbox').getProperty('checked');
            settings['enable_multi_connections_from_same_ip'] = $('allowMultipleConnectionsFromTheSameIPAddress').getProperty('checked');
            settings['validate_https_tracker_certificate'] = $('validateHTTPSTrackerCertificate').getProperty('checked');
            settings['ssrf_mitigation'] = $('mitigateSSRF').getProperty('checked');
            settings['block_peers_on_privileged_ports'] = $('blockPeersOnPrivilegedPorts').getProperty('checked');
            settings['enable_embedded_tracker'] = $('enableEmbeddedTracker').getProperty('checked');
            settings['embedded_tracker_port'] = Number($('embeddedTrackerPort').getProperty('value'));
            settings['embedded_tracker_port_forwarding'] = $('embeddedTrackerPortForwarding').getProperty('checked');
            settings['mark_of_the_web'] = $('markOfTheWeb').getProperty('checked');
            settings['python_executable_path'] = $('pythonExecutablePath').getProperty('value');
            settings['upload_slots_behavior'] = Number($('uploadSlotsBehavior').getProperty('value'));
            settings['upload_choking_algorithm'] = Number($('uploadChokingAlgorithm').getProperty('value'));
            settings['announce_to_all_trackers'] = $('announceAllTrackers').getProperty('checked');
            settings['announce_to_all_tiers'] = $('announceAllTiers').getProperty('checked');
            settings['announce_ip'] = $('announceIP').getProperty('value');
            settings['max_concurrent_http_announces'] = Number($('maxConcurrentHTTPAnnounces').getProperty('value'));
            settings['stop_tracker_timeout'] = Number($('stopTrackerTimeout').getProperty('value'));
            settings['peer_turnover'] = Number($('peerTurnover').getProperty('value'));
            settings['peer_turnover_cutoff'] = Number($('peerTurnoverCutoff').getProperty('value'));
            settings['peer_turnover_interval'] = Number($('peerTurnoverInterval').getProperty('value'));
            settings['request_queue_size'] = Number($('requestQueueSize').getProperty('value'));
            settings['dht_bootstrap_nodes'] = $('dhtBootstrapNodes').getProperty('value');
            settings['i2p_inbound_quantity'] = Number($('i2pInboundQuantity').getProperty('value'));
            settings['i2p_outbound_quantity'] = Number($('i2pOutboundQuantity').getProperty('value'));
            settings['i2p_inbound_length'] = Number($('i2pInboundLength').getProperty('value'));
            settings['i2p_outbound_length'] = Number($('i2pOutboundLength').getProperty('value'));

            // Send it to qBT
            window.parent.qBittorrent.Cache.preferences.set({
                data: settings,
                onFailure: function() {
                    alert("QBT_TR(Unable to save program preferences, qBittorrent is probably unreachable.)QBT_TR[CONTEXT=HttpServer]");
                    window.parent.qBittorrent.Client.closeWindows();
                },
                onSuccess: function() {
                    // Close window
                    window.parent.location.reload();
                    window.parent.qBittorrent.Client.closeWindows();
                }
            });
        };

        // hide entries
        const buildInfo = window.qBittorrent.Cache.buildInfo.get();

        const libtorrentVersion = window.qBittorrent.Misc.parseVersion(buildInfo.libtorrent);
        if (libtorrentVersion.valid) {
            if (libtorrentVersion.major >= 2) {
                $('rowDiskCache').style.display = 'none';
                $('rowDiskCacheExpiryInterval').style.display = 'none';
                $('rowCoalesceReadsAndWrites').style.display = 'none';
            }
            else {
                $('fieldsetI2p').style.display = 'none';
                $('rowMemoryWorkingSetLimit').style.display = 'none';
                $('rowHashingThreads').style.display = 'none';
                $('rowDiskIOType').style.display = 'none';
                $('rowI2pInboundQuantity').style.display = 'none';
                $('rowI2pOutboundQuantity').style.display = 'none';
                $('rowI2pInboundLength').style.display = 'none';
                $('rowI2pOutboundLength').style.display = 'none';
            }

            if (!((libtorrentVersion.major >= 2) && (libtorrentVersion.minor >= 0) && (libtorrentVersion.fix >= 6)))
                $('diskIOWriteModeWriteThrough').style.display = 'none';
        }

        if ((buildInfo.platform !== 'macos') && (buildInfo.platform !== 'windows'))
            $('rowMarkOfTheWeb').style.display = 'none';

        $('networkInterface').addEvent('change', function() {
            updateInterfaceAddresses($(this).getProperty('value'), '');
        });

        loadPreferences();

        return exports();
    })();

    Object.freeze(window.qBittorrent.Preferences);
</script>
